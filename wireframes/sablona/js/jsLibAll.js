{if(typeof window.JAK!="object"){window.JAK={"NAME":"JAK"};};JAK.idGenerator=function(){this.idCnt=this.idCnt<10000000?this.idCnt:0;var ids="m"+new Date().getTime().toString(16)+"m"+this.idCnt.toString(16);this.idCnt++;return ids;};if(!Function.prototype.bind){Function.prototype.bind=function(thisObj){var fn=this;var args=Array.prototype.slice.call(arguments,1);return function(){return fn.apply(thisObj,args.concat(Array.prototype.slice.call(arguments)));};};};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(item,from){var len=this.length;var i=from||0;if(i<0){i+=len;}for(;i<len;i++){if(i in this&&this[i]===item){return i;}}return -1;};}if(!Array.indexOf){Array.indexOf=function(obj,item,from){return Array.prototype.indexOf.call(obj,item,from);};}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(item,from){var len=this.length;var i=from||len-1;if(i<0){i+=len;}for(;i>-1;i--){if(i in this&&this[i]===item){return i;}}return -1;};}if(!Array.lastIndexOf){Array.lastIndexOf=function(obj,item,from){return Array.prototype.lastIndexOf.call(obj,item,from);};}if(!Array.prototype.forEach){Array.prototype.forEach=function(cb,_this){var len=this.length;for(var i=0;i<len;i++){if(i in this){cb.call(_this,this[i],i,this);}}};}if(!Array.forEach){Array.forEach=function(obj,cb,_this){Array.prototype.forEach.call(obj,cb,_this);};}if(!Array.prototype.every){Array.prototype.every=function(cb,_this){var len=this.length;for(var i=0;i<len;i++){if(i in this&&!cb.call(_this,this[i],i,this)){return false;}}return true;};}if(!Array.every){Array.every=function(obj,cb,_this){return Array.prototype.every.call(obj,cb,_this);};}if(!Array.prototype.some){Array.prototype.some=function(cb,_this){var len=this.length;for(var i=0;i<len;i++){if(i in this&&cb.call(_this,this[i],i,this)){return true;}}return false;};}if(!Array.some){Array.some=function(obj,cb,_this){return Array.prototype.some.call(obj,cb,_this);};}if(!Array.prototype.map){Array.prototype.map=function(cb,_this){var len=this.length;var res=new Array(len);for(var i=0;i<len;i++){if(i in this){res[i]=cb.call(_this,this[i],i,this);}}return res;};}if(!Array.map){Array.map=function(obj,cb,_this){return Array.prototype.map.call(obj,cb,_this);};}if(!Array.prototype.filter){Array.prototype.filter=function(cb,_this){var len=this.length;var res=[];for(var i=0;i<len;i++){if(i in this){var val=this[i];if(cb.call(_this,val,i,this)){res.push(val);}}}return res;};}if(!Array.filter){Array.filter=function(obj,cb,_this){return Array.prototype.filter.call(obj,cb,_this);};}String.prototype.lpad=function(character,count){var ch=character||"0";var cnt=count||2;var s="";while(s.length<(cnt-this.length)){s+=ch;}s=s.substring(0,cnt-this.length);return s+this;};String.prototype.rpad=function(character,count){var ch=character||"0";var cnt=count||2;var s="";while(s.length<(cnt-this.length)){s+=ch;}s=s.substring(0,cnt-this.length);return this+s;};String.prototype.trim=function(){return this.match(/^\s*([\s\S]*?)\s*$/)[1];};if(!String.trim){String.trim=function(obj){return String.prototype.trim.call(obj);};}Date.prototype._dayNames=["PondÄlĂ­","ĂterĂ˝","StĹeda","Ätvrtek","PĂĄtek","Sobota","NedÄle"];Date.prototype._dayNamesShort=["Po","Ăt","St","Ät","PĂĄ","So","Ne"];Date.prototype._monthNames=["Leden","Ănor","BĹezen","Duben","KvÄten","Äerven","Äervenec","Srpen","ZĂĄĹĂ­","ĹĂ­jen","Listopad","Prosinec"];Date.prototype._monthNamesShort=["Led","Ăno","BĹe","Dub","KvÄ","Äer","Ärc","Srp","ZĂĄĹ","ĹĂ­j","Lis","Pro"];Date.prototype.format=function(str){var suffixes={"1":"st","2":"nd","3":"rd","21":"st","22":"nd","23":"rd","31":"st"};var result="";var escape=false;for(var i=0;i<str.length;i++){var ch=str.charAt(i);if(escape){escape=false;result+=ch;continue;}switch(ch){case "\\":if(escape){escape=false;result+=ch;}else{escape=true;}break;case "d":result+=this.getDate().toString().lpad();break;case "j":result+=this.getDate();break;case "w":result+=this.getDay();break;case "N":result+=this.getDay()||7;break;case "S":var d=this.getDate();result+=suffixes[d]||"th";break;case "D":result+=this._dayNamesShort[(this.getDay()||7)-1];break;case "l":result+=this._dayNames[(this.getDay()||7)-1];break;case "z":var t=this.getTime();var d=new Date(t);d.setDate(1);d.setMonth(0);var diff=t-d.getTime();result+=diff/(1000*60*60*24);break;case "W":var d=new Date(this.getFullYear(),this.getMonth(),this.getDate());var day=d.getDay()||7;d.setDate(d.getDate()+(4-day));var year=d.getFullYear();var day=Math.floor((d.getTime()-new Date(year,0,1,-6))/(1000*60*60*24));result+=(1+Math.floor(day/7)).toString().lpad();break;case "m":result+=(this.getMonth()+1).toString().lpad();break;case "n":result+=(this.getMonth()+1);break;case "M":result+=this._monthNamesShort[this.getMonth()];break;case "F":result+=this._monthNames[this.getMonth()];break;case "t":var t=this.getTime();var m=this.getMonth();var d=new Date(t);var day=0;do{day=d.getDate();t+=1000*60*60*24;d=new Date(t);}while(m==d.getMonth());;result+=day;break;case "L":var d=new Date(this.getTime());d.setDate(1);d.setMonth(1);d.setDate(29);result+=(d.getMonth()==1?"1":"0");break;case "Y":result+=this.getFullYear().toString().lpad();break;case "y":result+=this.getFullYear().toString().lpad().substring(2);break;case "a":result+=(this.getHours()<12?"am":"pm");break;case "A":result+=(this.getHours()<12?"AM":"PM");break;case "G":result+=this.getHours();break;case "H":result+=this.getHours().toString().lpad();break;case "g":result+=this.getHours()%12;break;case "h":result+=(this.getHours()%12).toString().lpad();break;case "i":result+=this.getMinutes().toString().lpad();break;case "s":result+=this.getSeconds().toString().lpad();break;case "Z":result+=-60*this.getTimezoneOffset();break;case "O":case "P":var base=this.getTimezoneOffset()/-60;var o=Math.abs(base).toString().lpad();if(ch=="P"){o+=":";}o+="00";result+=(base>=0?"+":"-")+o;break;case "U":result+=this.getTime()/1000;break;case "u":result+="0";break;case "c":result+=arguments.callee.call(this,"Y-m-d")+"T"+arguments.callee.call(this,"H:i:sP");break;case "r":result+=arguments.callee.call(this,"D, j M Y H:i:s O");break;default:result+=ch;break;}}return result;};if(!window.console){window.console={"log":function(){}};}JAK.ClassMaker={};JAK.ClassMaker.VERSION="5.0";JAK.ClassMaker.NAME="JAK.ClassMaker";JAK.ClassMaker._objLib=null;JAK.ClassMaker.makeClass=function(params){var p=this._makeDefaultParams(params);var constructor=function(){var inicializator=false;if("$constructor" in arguments.callee.prototype){inicializator=arguments.callee.prototype.$constructor;}if(inicializator){inicializator.apply(this,arguments);}};return this._addConstructorProperties(constructor,p);};JAK.ClassMaker.makeSingleton=function(params){var p=this._makeDefaultParams(params);var constructor=function(){throw new Error("Cannot instantiate singleton class");};constructor._instance=null;constructor.getInstance=this._getInstance;return this._addConstructorProperties(constructor,p);};JAK.ClassMaker.makeInterface=function(params){var p=this._makeDefaultParams(params);var constructor=function(){throw new Error("Cannot instantiate interface");};return this._addConstructorProperties(constructor,p);};JAK.ClassMaker.makeStatic=function(params){var p=this._makeDefaultParams(params);var obj={};obj.VERSION=p.VERSION;obj.NAME=p.NAME;return obj;};JAK.ClassMaker._makeDefaultParams=function(params){if("EXTEND" in params){if(!params.EXTEND){throw new Error("Cannot extend non-exist class");}if(!("NAME" in params.EXTEND)){throw new Error("Cannot extend non-JAK class");}}params.NAME=params.NAME||false;params.VERSION=params.VERSION||"1.0";params.EXTEND=params.EXTEND||false;params.IMPLEMENT=params.IMPLEMENT||[];params.DEPEND=params.DEPEND||[];if(!(params.IMPLEMENT instanceof Array)){params.IMPLEMENT=[params.IMPLEMENT];}this._preMakeTests(params);return params;};JAK.ClassMaker._preMakeTests=function(params){if(!params.NAME){throw new Error("No NAME passed to JAK.ClassMaker.makeClass()");}if(!this._objLib&&JAK.ObjLib){this._objLib=new JAK.ObjLib();}var result=false;if(result=this._testDepend(params.DEPEND)){throw new Error("Dependency error in class "+params.NAME+" ("+result+")");}};JAK.ClassMaker._addConstructorProperties=function(constructor,params){for(var p in params){constructor[p]=params[p];}this._setInheritance(constructor);constructor.prototype.constructor=constructor;constructor.prototype.$super=this._$super;return constructor;};JAK.ClassMaker._getInstance=function(){if(!this._instance){var tmp=function(){};tmp.prototype=this.prototype;this._instance=new tmp();if("$constructor" in this.prototype){this._instance.$constructor();}}return this._instance;};JAK.ClassMaker._setInheritance=function(constructor){if(constructor.EXTEND){this._makeInheritance(constructor,constructor.EXTEND);}for(var i=0;i<constructor.IMPLEMENT.length;i++){this._makeInheritance(constructor,constructor.IMPLEMENT[i],true);}};JAK.ClassMaker._makeInheritance=function(constructor,parent,noSuper){for(var p in parent.prototype){var item=parent.prototype[p];if(typeof (item)!="function"){continue;}if(!item.owner){item.owner=parent;}}if(!noSuper){var tmp=function(){};tmp.prototype=parent.prototype;constructor.prototype=new tmp();if(this._objLib){for(var i in parent.prototype){if(typeof parent.prototype[i]=="object"){constructor.prototype[i]=this._objLib.copy(parent.prototype[i]);}}}return;}for(var p in parent.prototype){if(typeof parent.prototype[p]=="object"){if(this._objLib){constructor.prototype[p]=this._objLib.copy(parent.prototype[p]);}}else{if(noSuper&&((p=="$constructor")||(p=="$destructor"))){continue;}constructor.prototype[p]=parent.prototype[p];}}};JAK.ClassMaker._testDepend=function(depend){for(var i=0;i<depend.length;i++){var item=depend[i];if(!item.sClass){return "Unsatisfied dependency";}if(!item.ver){return "Version not specified in dependency";}var depMajor=item.sClass.VERSION.split(".")[0];var claMajor=item.ver.split(".")[0];if(depMajor!=claMajor){return "Version conflict in "+item.sClass.NAME;}}return false;};JAK.ClassMaker._$super=function(){var caller=arguments.callee.caller;if(!caller){throw new Error("Function.prototype.caller not supported");}var owner=caller.owner||this.constructor;var callerName=false;for(var name in owner.prototype){if(owner.prototype[name]==caller){callerName=name;}}if(!callerName){throw new Error("Cannot find supplied method in constructor");}var parent=owner.EXTEND;if(!parent){throw new Error("No super-class available");}if(!parent.prototype[callerName]){throw new Error("Super-class doesn't have method '"+callerName+"'");}var func=parent.prototype[callerName];return func.apply(this,arguments);};JAK.Events=JAK.ClassMaker.makeStatic({"NAME":"JAK.Events","VERSION":"3.0"});JAK.Events._eventFolder={};JAK.Events._domReadyTimer=null;JAK.Events._domReadyCallback=[];JAK.Events._domReadyAlreadyRun=false;JAK.Events._windowLoadListenerId=false;JAK.Events.onDomReady=function(obj,func){JAK.Events._domReadyCallback[JAK.Events._domReadyCallback.length]={"obj":obj,"func":func};JAK.Events._onDomReady();};JAK.Events._onDomReady=function(){if((/Safari/i.test(navigator.userAgent))||(/WebKit|Khtml/i.test(navigator.userAgent))){JAK.Events._domReadyTimer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(JAK.Events._domReadyTimer);JAK.Events._domReady();}},10);}else{if(document.all&&!window.opera){if(window.parent==window){try{document.documentElement.doScroll("left");}catch(error){setTimeout(arguments.callee,1);return;}JAK.Events._domReady();}else{JAK.Events._windowLoadListenerId=JAK.Events.addListener(window,"load",window,function(){JAK.Events._domReady();});}}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",JAK.Events._domReady,false);}else{JAK.Events._windowLoadListenerId=JAK.Events.addListener(window,"load",window,function(){JAK.Events._domReady();});}}}};JAK.Events._domReady=function(){if(!JAK.Events._domReadyAlreadyRun){JAK.Events._domReadyAlreadyRun=true;if(document.addEventListener){document.removeEventListener("DOMContentLoaded",JAK.Events._domReady,true);}if(JAK.Events._windowLoadListenerId){JAK.Events.removeListener(JAK.Events._windowLoadListenerId);JAK.Events._windowLoadListenerId=false;}for(var i=0;i<JAK.Events._domReadyCallback.length;i++){var callback=JAK.Events._domReadyCallback[i];if(typeof callback.func=="string"){callback.obj[callback.func]();}else{callback.func.apply(callback.obj,[]);}}JAK.Events._domReadyCallback=[];}};JAK.Events.addListener=function(elm,type,obj,func,capture){var capture=capture||false;var action=null;var id=JAK.idGenerator();if(arguments.length>3){if(typeof (func)=="string"&&typeof (obj[func])!="function"){throw new Error("Events.addListener: arguments[3] must be method of arguments[2]");}action=this._getMethod(obj,func,elm,id);}else{action=this._getMethod(window,obj,elm,id);}this._addListener(elm,type,action,capture);this._eventFolder[id]={"elm":elm,"type":type,"action":action,"capture":capture,"obj":obj,"func":func};return id;};JAK.Events._addListener=function(elm,type,action,capture){if(document.addEventListener){elm.addEventListener(type,action,capture);}else{if(document.attachEvent){elm.attachEvent("on"+type,action);}else{throw new Error("This browser can not handle events");}}};JAK.Events._getMethod=function(obj,func,elm,id){var f=(typeof (func)=="string"?obj[func]:func);return function(e){return f.call(obj,e,elm,id);};};JAK.Events.removeListener=function(id){if(!(id in this._eventFolder)){throw new Error("Cannot remove non-existent event ID '"+id+"'");}var obj=this._eventFolder[id];this._removeListener(obj.elm,obj.type,obj.action,obj.capture);delete this._eventFolder[id];};JAK.Events._removeListener=function(elm,type,action,capture){if(document.removeEventListener){elm.removeEventListener(type,action,capture);}else{if(document.detachEvent){elm.detachEvent("on"+type,action);}}};JAK.Events.removeAllListeners=function(){for(var id in this._eventFolder){this.removeListener(id);}};JAK.Events.stopEvent=function(e){var e=e||window.event;if(e.stopPropagation){e.stopPropagation();}else{e.cancelBubble=true;}};JAK.Events.cancelDef=function(e){var e=e||window.event;if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}};JAK.Events.getTarget=function(e){var e=e||window.event;return e.target||e.srcElement;};JAK.Events.getInfo=function(){var output=[];var nodes=[];var events=[];for(var id in JAK.Events._eventFolder){var o=JAK.Events._eventFolder[id];var elm=o.elm;var index=nodes.indexOf(elm);if(index==-1){index=nodes.push(elm)-1;events[index]=[];}events[index].push(o);}for(var i=0;i<nodes.length;i++){var listeners=[];for(var j=0;j<events[i].length;j++){var o=events[i][j];var obj=o.obj||window;var func=o.func||o.obj;listeners.push({"sType":o.type,"bRemoved":false,"sFunction":(obj!=window&&obj.constructor?"["+obj.constructor.NAME+"]":"")+(typeof (func)=="string"?"."+func+" = "+obj[func].toString():" "+func.toString())});}output.push({"sSource":"JAK","nNode":nodes[i],"aListeners":listeners});}return output;};JAK.Browser=JAK.ClassMaker.makeStatic({"NAME":"JAK.Browser","VERSION":"3.0"});JAK.Browser.platform="";JAK.Browser.client="";JAK.Browser.version=0;JAK.Browser.agent="";JAK.Browser.mouse={};JAK.Browser._getPlatform=function(){if((this._agent.indexOf("X11")!=-1)||(this._agent.indexOf("Linux")!=-1)){return "nix";}else{if(this._agent.indexOf("Mac")!=-1){return "mac";}else{if(this._agent.indexOf("Win")!=-1){return "win";}else{return "oth";}}}};JAK.Browser._getClient=function(){if(window.opera){return "opera";}else{if(window.chrome){return "chrome";}else{if(document.attachEvent&&(typeof navigator.systemLanguage!="undefined")){return "ie";}else{if(document.getAnonymousElementByAttribute){return "gecko";}else{if(this._agent.indexOf("KHTML")){if(this._vendor=="KDE"){return "konqueror";}else{return "safari";}}else{return "oth";}}}}}};JAK.Browser._getMouse=function(){var left;var right;var middle;if((JAK.Browser.client=="ie"&&parseFloat(JAK.Browser.version)<9)||(JAK.Browser.client=="konqueror")){left=1;middle=4;right=2;}else{if((JAK.Browser.client=="opera")&&(JAK.Browser.version>7)&&(JAK.Browser.version<9)){left=1;middle=4;right=2;}else{if(JAK.Browser.client=="safari"){if(parseInt(JAK.Browser.version)>2){left=0;middle=0;right=2;}else{left=1;middle=1;right=2;}}else{left=0;middle=1;right=2;}}}return {"left":left,"right":right,"middle":middle};};JAK.Browser._getVersion=function(){var out=0;var fncName="_get_"+this.client+"_ver";if(typeof this[fncName]=="function"){return this[fncName]();}else{return 0;}};JAK.Browser._get_ie_ver=function(){if(typeof Function.prototype.call!="undefined"){if(document.addEventListener){return "9";}else{if(window.XDomainRequest){return "8";}else{if(window.XMLHttpRequest){return "7";}else{if(typeof document.doctype=="object"){return "6";}else{return "5.5";}}}}}else{return "5.0";}};JAK.Browser._get_opera_ver=function(){if(window.opera.version){return window.opera.version();}else{if(document.createComment){return "7";}else{return "6";}}};JAK.Browser._get_gecko_ver=function(){if(document.getBoxObjectFor===undefined&&navigator.geolocation){return "3.6";}else{if(navigator.geolocation){return "3.5";}else{if(document.getElementsByClassName){return "3";}else{if(window.external){return "2";}else{return "1.5";}}}}};JAK.Browser._get_konqueror_ver=function(){var num=this._agent.indexOf("KHTML")+6;var part=this._agent.substring(num);var end=part.indexOf(" ");var x=part.substring(0,end-2);return x;};JAK.Browser._get_safari_ver=function(){var ver=this._agent.match(/version\/([0-9]+)/i);return (ver?ver[1]:"1");};JAK.Browser._get_chrome_ver=function(){var ver=this._agent.match(/Chrome\/([0-9]+)/i);return (ver?ver[1]:null);};JAK.Browser.isOld=function(){if(this.client=="ie"&&parseFloat(this.version)<=5.5){return true;}if(this.client=="opera"&&parseFloat(this.version)<9.5){return true;}if(this.client=="gecko"&&parseFloat(this.version)<2){return true;}if(this.client=="safari"&&parseFloat(this.version)<2){return true;}if(this.client=="konqueror"&&parseFloat(this.version)<3.5){return true;}return false;};JAK.Browser.getBrowser=function(){this._agent=this.agent=navigator.userAgent;this._platform=navigator.platform;this._vendor=navigator.vendor;this.platform=this._getPlatform();this.client=this._getClient();this.version=this._getVersion();this.mouse=this._getMouse();};JAK.Browser.getBrowser();JAK.DOM=JAK.ClassMaker.makeStatic({"NAME":"JAK.DOM","VERSION":"5.0"});JAK.cel=function(tagName,className,id,doc){var d=doc||document;var node=d.createElement(tagName);if(className){node.className=className;}if(id){node.id=id;}return node;};JAK.mel=function(tagName,properties,styles,doc){var d=doc||document;var node=d.createElement(tagName);if(properties){for(var p in properties){node[p]=properties[p];}}if(styles){JAK.DOM.setStyle(node,styles);}return node;};JAK.ctext=function(str,doc){var d=doc||document;return d.createTextNode(str);};JAK.gel=function(id){if(typeof (id)=="string"){return document.getElementById(id);}else{return id;}};JAK.query=function(query){var filterNodes=function(nodes,attributes){var arr=[];for(var i=0;i<nodes.length;i++){var node=nodes[i];var ok=true;for(var j=0;j<attributes.length;j++){var attrib=attributes[j];var ch=attrib.charAt(0);var value=attrib.substr(1).toLowerCase();if(ch=="#"&&value!=node.id.toLowerCase()){ok=false;}if(ch=="."&&!JAK.DOM.hasClass(node,value)){ok=false;}}if(ok){arr.push(node);}}return arr;};var result=[];var selectors=query.split(",");while(selectors.length){var selector=selectors.shift().trim();var parts=selector.split(/ +/);var candidates=[document];for(var i=0;i<parts.length;i++){var newCandidates=[];var part=parts[i];var tagName=part.match(/^[a-z]*/i)[0]||"*";var attributes=part.match(/[\.#][^\.#]+/g)||[];while(candidates.length){var candidate=candidates.shift();var nodes=candidate.getElementsByTagName(tagName);newCandidates=newCandidates.concat(filterNodes(nodes,attributes));}candidates=newCandidates;}for(var i=0;i<candidates.length;i++){var c=candidates[i];if(result.indexOf(c)==-1){result.push(c);}}}return result;};JAK.DOM.append=function(){for(var i=0;i<arguments.length;i++){var arr=arguments[i];var head=arr[0];for(var j=1;j<arr.length;j++){head.appendChild(arr[j]);}}};JAK.DOM.hasClass=function(element,className){var arr=element.className.split(" ");for(var i=0;i<arr.length;i++){if(arr[i].toLowerCase()==className.toLowerCase()){return true;}}return false;};JAK.DOM.addClass=function(element,className){if(JAK.DOM.hasClass(element,className)){return;}element.className+=" "+className;};JAK.DOM.removeClass=function(element,className){var names=element.className.split(" ");var newClassArr=[];for(var i=0;i<names.length;i++){if(names[i].toLowerCase()!=className.toLowerCase()){newClassArr.push(names[i]);}}element.className=newClassArr.join(" ");};JAK.DOM.clear=function(element){while(element.firstChild){element.removeChild(element.firstChild);}};JAK.DOM.getDocSize=function(){var x=0;var y=0;if(document.compatMode!="BackCompat"){if(document.documentElement.clientWidth&&JAK.Browser.client!="opera"){x=document.documentElement.clientWidth;y=document.documentElement.clientHeight;}else{if(JAK.Browser.client=="opera"){if(parseFloat(JAK.Browser.version)<9.5){x=document.body.clientWidth;y=document.body.clientHeight;}else{x=document.documentElement.clientWidth;y=document.documentElement.clientHeight;}}}if((JAK.Browser.client=="safari")||(JAK.Browser.client=="konqueror")){y=window.innerHeight;}}else{x=document.body.clientWidth;y=document.body.clientHeight;}return {"width":x,"height":y};};JAK.DOM.getBoxPosition=function(obj,ref){var top=0;var left=0;var refBox=ref||obj.ownerDocument.body;if(obj.getBoundingClientRect&&!ref){var de=document.documentElement;var box=obj.getBoundingClientRect();var scroll=JAK.DOM.getBoxScroll(obj);return {"left":box.left+scroll.x-de.clientLeft,"top":box.top+scroll.y-de.clientTop};}while(obj&&obj!=refBox){top+=obj.offsetTop;left+=obj.offsetLeft;if((JAK.Browser.client=="gecko"&&JAK.Browser.version<3)||JAK.Browser.client=="safari"){if(JAK.DOM.getStyle(obj,"position")=="fixed"){var scroll=JAK.DOM.getScrollPos();top+=scroll.y;left+=scroll.x;break;}}obj=obj.offsetParent;}return {"top":top,"left":left};};JAK.DOM.getPortBoxPosition=function(obj,parent,fixed){var pos=JAK.DOM.getBoxPosition(obj,parent,fixed);var scroll=JAK.DOM.getBoxScroll(obj,parent,fixed);pos.left-=scroll.x;pos.top-=scroll.y;return {"left":pos.left,"top":pos.top};};JAK.DOM.getBoxScroll=function(obj,ref,fixed){var x=0;var y=0;var cur=obj.parentNode;var limit=ref||obj.ownerDocument.documentElement;var fix=false;while(1){if(JAK.Browser.client=="opera"&&JAK.DOM.getStyle(cur,"display")!="block"){cur=cur.parentNode;continue;}if(JAK.Browser.client=="opera"&&JAK.Browser.version<9.5&&cur==document.body){cur=cur.parentNode;continue;}if(fixed&&JAK.DOM.getStyle(cur,"position")=="fixed"){fix=true;}if(!fix){x+=cur.scrollLeft;y+=cur.scrollTop;}if(cur==limit){break;}cur=cur.parentNode;if(!cur){break;}}return {"x":x,"y":y};};JAK.DOM.getScrollPos=function(){if(document.documentElement.scrollTop||document.documentElement.scrollLeft){var ox=document.documentElement.scrollLeft;var oy=document.documentElement.scrollTop;}else{if(document.body.scrollTop||document.body.scrollLeft){var ox=document.body.scrollLeft;var oy=document.body.scrollTop;}else{var ox=0;var oy=0;}}return {"x":ox,"y":oy};};JAK.DOM.getStyle=function(elm,property){if(document.defaultView&&document.defaultView.getComputedStyle){var cs=elm.ownerDocument.defaultView.getComputedStyle(elm,"");if(!cs){return false;}return cs[property];}else{return elm.currentStyle[property];}};JAK.DOM.setStyle=function(elm,style){for(var name in style){elm.style[name]=style[name];}};JAK.DOM.writeStyle=function(css){var node=JAK.mel("style",{"type":"text/css"});if(node.styleSheet){node.styleSheet.cssText=css;}else{node.appendChild(JAK.ctext(css));}var head=document.getElementsByTagName("head");if(head.length){head=head[0];}else{head=JAK.cel("head");document.documentElement.appendChild(head,document.body);}head.appendChild(node);return node;};JAK.DOM.elementsHider=function(obj,elements,action){var elems=elements;if(!elems){elems=["select","object","embed","iframe"];}var hidden=arguments.callee.hidden;if(hidden){hidden.forEach(function(node){node.style.visibility="visible";});arguments.callee.hidden=[];}function verifyParent(node){var ok=false;var cur=node;while(cur.parentNode&&cur!=document){if(cur==obj){ok=true;}cur=cur.parentNode;}return ok;}if(action=="hide"){if(typeof obj=="string"){obj=JAK.gel(obj);}var hidden=[];var box=this.getBoxPosition(obj);box.width=obj.offsetWidth+box.left;box.height=obj.offsetHeight+box.top;for(var e=0;e<elems.length;++e){var elm=document.getElementsByTagName(elems[e]);for(var f=0;f<elm.length;++f){var node=this.getBoxPosition(elm[f]);if(verifyParent(elm[f])){continue;}node.width=elm[f].offsetWidth+node.left;node.height=elm[f].offsetHeight+node.top;if(!((box.left>node.width)||(box.width<node.left)||(box.top>node.height)||(box.height<node.top))){elm[f].style.visibility="hidden";hidden.push(elm[f]);}}}arguments.callee.hidden=hidden;}};JAK.DOM.getElementsByClass=function(searchClass,node,tag){if(document.getElementsByClassName&&!tag){var elm=node||document;return JAK.DOM.arrayFromCollection(elm.getElementsByClassName(searchClass));}if(document.querySelectorAll&&!tag){var elm=node||document;return JAK.DOM.arrayFromCollection(elm.querySelectorAll("."+searchClass));}var classElements=[];var node=node||document;var tag=tag||"*";var els=node.getElementsByTagName(tag);var elsLen=els.length;var pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");for(var i=0,j=0;i<elsLen;i++){if(pattern.test(els[i].className)){classElements[j]=els[i];j++;}}return classElements;};JAK.DOM.arrayFromCollection=function(col){var result=[];try{result=Array.prototype.slice.call(col);}catch(e){for(var i=0;i<col.length;i++){result.push(col[i]);}}finally{return result;}};JAK.DOM.separateCode=function(str){var js=[];var out={};var s=str.replace(/<script.*?>([\s\S]*?)<\/script>/g,function(tag,code){js.push(code);return "";});return [s,js.join("\n")];};JAK.DOM.shiftBox=function(box){var dx=0;var dy=0;var pos=JAK.DOM.getBoxPosition(box);var scroll=JAK.DOM.getScrollPos();pos.left-=scroll.x;pos.top-=scroll.y;var port=JAK.DOM.getDocSize();var w=box.offsetWidth;var h=box.offsetHeight;var diff=pos.top+h-port.height;if(diff>0){pos.top-=diff;dy-=diff;}var diff=pos.left+w-port.width;if(diff>0){pos.left-=diff;dx-=diff;}var diff=pos.top;if(diff<0){pos.top-=diff;dy-=diff;}var diff=pos.left;if(diff<0){pos.left-=diff;dx-=diff;}return [dx,dy];};JAK.DOM.scrollbarWidth=function(){var div=JAK.mel("div",false,{"width":"50px","height":"50px","overflow":"hidden","position":"absolute","left":"-200px"});var innerDiv=JAK.mel("div",false,{"height":"100px"});div.appendChild(innerDiv);document.body.insertBefore(div,document.body.firstChild);var w1=div.clientWidth+parseInt(JAK.DOM.getStyle(div,"paddingLeft"))+parseInt(JAK.DOM.getStyle(div,"paddingRight"));JAK.DOM.setStyle(div,{"overflowY":"scroll"});var w2=div.clientWidth+parseInt(JAK.DOM.getStyle(div,"paddingLeft"))+parseInt(JAK.DOM.getStyle(div,"paddingRight"));document.body.removeChild(div);return (w1-w2);};JAK.ObjLib=JAK.ClassMaker.makeClass({"NAME":"ObjLib","VERSION":"3.0"});JAK.ObjLib.prototype.$constructor=function(){this._options={"functionResistant":false,"recursionResistant":false,"depthResistant":false,"sortedSerialization":false,"showFlag":false,"depth":200};};JAK.ObjLib.prototype.$destructor=function(){};JAK.ObjLib.prototype.reSetOptions=function(newOptions,set){if(!newOptions){return this._options;}var out={};for(var i in this._options){if(set&&newOptions[i]){this._options[i]=newOptions[i];}out[i]=newOptions[i]?newOptions[i]:this._options[i];}return out;};JAK.ObjLib.prototype.pretty=function(str,sep){var arr=str.toString().split("");var newline=this._isIE()?"\n\r":"\n";var tab=sep?sep:"\t";var ptr=0;var depth=0;var inSpecial="";function countBackslashes(){var cnt=0;var ptr2=ptr-1;while(ptr2>=0&&arr[ptr2]=="\\"){cnt++;ptr2--;}return cnt;}while(ptr<arr.length){var ch=arr[ptr];switch(ch){case "\"":if(inSpecial=="re"){break;}var num=countBackslashes();if(!(num&1)){inSpecial=(inSpecial?"":"str");}break;case "/":if(inSpecial=="str"){break;}var num=countBackslashes();if(!(num&1)){inSpecial=(inSpecial?"":"re");}break;case ",":if(!inSpecial){arr.splice(++ptr,0,newline);for(var i=0;i<depth;i++){arr.splice(++ptr,0,tab);}}break;case "{":case "[":if(!inSpecial){depth++;arr.splice(++ptr,0,newline);for(var i=0;i<depth;i++){arr.splice(++ptr,0,tab);}}break;case "}":case "]":if(!inSpecial){arr.splice(ptr++,0,newline);depth--;for(var i=0;i<depth;i++){arr.splice(ptr++,0,tab);}}break;}ptr++;}return arr.join("");};JAK.ObjLib.prototype.serialize=function(objToSource,options){var deepFlag=0;var startString="{";var endString="}";var propertySep=":";var propertyEnd=",";var mySelf=this;var output="";var firstStep=true;var cache=[];var mOptions=this.reSetOptions(options);var mySource=function(obj){if(mOptions.depth&&(mOptions.depth<deepFlag)){if(!mOptions.depthResistant){throw new Error("Serialize: structure is too depth.");}else{return "\"[max depth overrun]\"";}}if(cache.indexOf(obj)!=-1){if(!mOptions.recursionResistant){throw new Error("serialize: Circular reference encountered");return null;}else{return "\"[circular reference found]\"";}}if(typeof arguments[1]!="undefined"){var propName=arguments[1];}else{var propName=false;}if(!(obj instanceof Object)){switch(typeof obj){case "string":return "\""+mySelf._formatString(obj)+"\"";break;case "undefined":return obj;break;default:return obj;break;}}else{cache.push(obj);var builtIn=mySelf._builtInObjectSerialize(obj,mOptions);if(builtIn.isSet){return builtIn.output;}else{if(typeof obj=="function"){if(!mOptions.functionResistant){throw new Error("Serialize: can't serialize object with some method - ** "+(propName?"obj":propName)+" **");}else{return "\"["+"function: "+propName+"]\"";}}var output=startString;deepFlag++;var klice=[];for(var p in obj){klice.push(p);}if(mOptions.sortedSerialization){klice.sort();}for(var i=0;i<klice.length;i++){var klic=klice[i];var propName=mySelf._formatString(klic);try{var value=obj[klic];}catch(e){var value="[value inaccessible]";}output+="\""+propName+"\""+propertySep+mySource(value,klic)+propertyEnd;}var charNum=(output.lastIndexOf(propertyEnd)>=0)?output.lastIndexOf(propertyEnd):output.length;output=output.substring(0,charNum);deepFlag--;return output+endString;}}};var source=mySource(objToSource);if(mOptions.showFlag){return this.pretty(source,mOptions.showFlag);}else{return source;}};JAK.ObjLib.prototype._arraySerialize=function(fieldToSerialize,options){var fieldStr="";var mySelf=this;var mOptions=options;var mySource=function(field){if(field instanceof Array){for(var i=0;i<field.length;i++){if(typeof field[i]=="function"&&!(field[i] instanceof RegExp)){if(!mOptions.functionResistant){throw new Error("Serialize: can't serialize Function");}else{fieldStr+="\"["+"function: "+i+"]\",";continue;}}if((typeof field[i]!="object")&&((typeof field[i]!="function"))){if(typeof field[i]=="string"){var str=mySelf._formatString(field[i]);fieldStr+="\""+str+"\",";}else{fieldStr+=field[i]+",";}}else{fieldStr+=mySelf.serialize(field[i],mOptions)+",";}}return "["+fieldStr.substring(0,fieldStr.length-1)+"]";}else{throw new Error("arraySerialize: Attribute is not Array");}};var myString=mySource(fieldToSerialize);return myString;};JAK.ObjLib.prototype.unserialize=function(serializedString){eval("var newVar="+serializedString);return newVar;};JAK.ObjLib.prototype.match=function(refObj,matchObj,options){var mOptions={"functionResistant":false,"recursionResistant":false,"depthResistant":false,"sortedSerialization":true,"showFlag":false,"depth":200};if(options){for(var i in mOptions){mOptions[i]=(typeof options[i]!="undefined"?options[i]:mOptions[i]);}}if(this.serialize(refObj,mOptions)==this.serialize(matchObj,mOptions)){return true;}else{return false;}};JAK.ObjLib.prototype._builtInObjectSerialize=function(testedObj,options){var output=null;var isSet=false;if(testedObj instanceof String){output="new String(\""+this._formatString(testedObj)+"\")";isSet=true;}else{if(testedObj instanceof Number){output="new Number("+testedObj+")";isSet=true;}else{if(testedObj instanceof RegExp){output="new RegExp("+testedObj+")";isSet=true;}else{if(testedObj instanceof Array){output=this._arraySerialize(testedObj,options);isSet=true;}else{if(testedObj instanceof Date){var tm=testedObj.getTime();output="new Date("+tm+")";isSet=true;}else{if(testedObj instanceof Boolean){output="new Boolean("+testedObj+")";isSet=true;}else{if(testedObj==null){isSet=true;}}}}}}}return {"isSet":isSet,"output":output};};JAK.ObjLib.prototype._isIE=function(){if(document.all&&document.attachEvent&&!window.opera){return true;}return false;};JAK.ObjLib.prototype.copy=function(objToCopy,options){var mOptions=this.reSetOptions(options);var str=this.serialize(objToCopy,mOptions);return this.unserialize(str);};JAK.ObjLib.prototype._formatString=function(s){var re=/["\\']/g;var re2=/[\n\r\t]/g;var replace={"\n":"\\n","\t":"\\t","\r":"\\r"};return s.replace(re,this._addSlashes).replace(re2,function(ch){return replace[ch];});},JAK.ObjLib.prototype._addSlashes=function(ch){return "\\"+ch;};JAK.ObjLib.prototype.arrayCopy=function(arrayToCopy,options){if(arrayToCopy instanceof Array){var mOptions=this.reSetOptions(options);var out=this.arraySerialize(arrayToCopy,mOptions);return this.unserialize(out);}else{throw new Error("ObjLib.arrayCopy: Attribute is not Array");}};JAK.Request=JAK.ClassMaker.makeClass({"NAME":"JAK.Request","VERSION":"2.0"});JAK.Request.XML=0;JAK.Request.TEXT=1;JAK.Request.JSONP=2;JAK.Request.BINARY=3;JAK.Request.prototype.$constructor=function(type,options){this._NEW=0;this._SENT=1;this._DONE=2;this._ABORTED=3;this._TIMEOUT=4;this._xhr=null;this._callback="";this._script=null;this._type=type;this._headers={};this._callbacks={};this._state=this._NEW;this._options={"async":true,"timeout":0,"method":"get"};for(var p in options){this._options[p]=options[p];}if(this._type==JAK.Request.JSONP){if(this._options.method.toLowerCase()=="post"){throw new Error("POST not supported in JSONP mode");}if(!this._options.async){throw new Error("Async not supported in JSONP mode");}}else{if(window.XMLHttpRequest){this._xhr=new XMLHttpRequest();}else{if(window.ActiveXObject){this._xhr=new ActiveXObject("Microsoft.XMLHTTP");}else{throw new Error("No XHR available");}}this._xhr.onreadystatechange=this._onReadyStateChange.bind(this);}};JAK.Request.prototype.$destructor=function(){if(this._state==this._SENT){this.abort();}this._xhr=null;};JAK.Request.prototype.setHeaders=function(headers){if(this._type==JAK.Request.JSONP){throw new Error("Request headers not supported in JSONP mode");}for(var p in headers){this._headers[p]=headers[p];}};JAK.Request.prototype.getHeaders=function(){if(this._state!=this._DONE){throw new Error("Response headers not available");}if(this._type==JAK.Request.JSONP){throw new Error("Response headers not supported in JSONP mode");}var headers={};var h=this._xhr.getAllResponseHeaders();if(h){h=h.split(/[\r\n]/);for(var i=0;i<h.length;i++)if(h[i]){var v=h[i].match(/^([^:]+): *(.*)$/);headers[v[1]]=v[2];}}return headers;};JAK.Request.prototype.send=function(url,data){if(this._state!=this._NEW){throw new Error("Request already sent");}this._state=this._SENT;this._userCallback();switch(this._type){case JAK.Request.XML:case JAK.Request.TEXT:case JAK.Request.BINARY:this._sendXHR(url,data);break;case JAK.Request.JSONP:this._sendScript(url,data);break;default:throw new Error("Unknown request type");break;}};JAK.Request.prototype.abort=function(){if(this._state!=this._SENT){return false;}this._state=this._ABORTED;if(this._xhr){this._xhr.abort();}this._userCallback();return true;};JAK.Request.prototype.setCallback=function(obj,method){this._setCallback(obj,method,this._DONE);return this;};JAK.Request.prototype.setSendCallback=function(obj,method){this._setCallback(obj,method,this._SENT);return this;};JAK.Request.prototype.setAbortCallback=function(obj,method){this._setCallback(obj,method,this._ABORTED);return this;};JAK.Request.prototype.setTimeoutCallback=function(obj,method){this._setCallback(obj,method,this._TIMEOUT);return this;};JAK.Request.prototype._setCallback=function(obj,method,state){this._callbacks[state]=[obj,method];};JAK.Request.prototype._sendXHR=function(url,data){var u,d;if(this._options.method.toLowerCase()=="get"){u=this._buildURL(url,data);d=null;}else{u=url;d=this._serializeData(data);var ctSet=false;for(var p in this._headers){if(p.toLowerCase()=="content-type"){ctSet=true;break;}}if(!ctSet){this.setHeaders({"Content-Type":"application/x-www-form-urlencoded"});}}if(this._type==JAK.Request.BINARY){if(this._xhr.overrideMimeType){this._xhr.overrideMimeType("text/plain; charset=x-user-defined");}else{if(JAK.Browser.client=="ie"){this._buildVBS();}else{throw new Error("This browser does not support binary transfer");}}}this._xhr.open(this._options.method,u,this._options.async);for(var p in this._headers){this._xhr.setRequestHeader(p,this._headers[p]);}this._xhr.send(d);if(this._options.timeout){setTimeout(this._timeout.bind(this),this._options.timeout);}if(!this._options.async){this._onReadyStateChange();}};JAK.Request.prototype._sendScript=function(url,data){var o=data||{};this._callback="callback"+JAK.idGenerator();o.callback=this._callback;var url=this._buildURL(url,o);window[this._callback]=this._scriptCallback.bind(this);this._script=JAK.mel("script",{"type":"text/javascript","src":url});document.body.insertBefore(this._script,document.body.firstChild);};JAK.Request.prototype._buildURL=function(url,data){var s=this._serializeData(data);if(!s.length){return url;}if(url.indexOf("?")==-1){return url+"?"+s;}else{return url+"&"+s;}};JAK.Request.prototype._serializeData=function(data){if(typeof (data)=="string"){return data;}if(!data){return "";}var arr=[];for(var p in data){arr.push(encodeURIComponent(p)+"="+encodeURIComponent(data[p]));}return arr.join("&");};JAK.Request.prototype._onReadyStateChange=function(){if(this._state==this._ABORTED){return;}if(this._xhr.readyState!=4){return;}var status=this._xhr.status;var data;if(this._type==JAK.Request.BINARY){data=[];if(JAK.Browser.client=="ie"){var length=VBS_getLength(this._xhr.responseBody);for(var i=0;i<length;i++){data.push(VBS_getByte(this._xhr.responseBody,i));}}else{var text=this._xhr.responseText;var length=text.length;for(var i=0;i<length;i++){data.push(text.charCodeAt(i)&255);}}}else{data=(this._type==JAK.Request.XML?this._xhr.responseXML:this._xhr.responseText);}this._done(data,status);};JAK.Request.prototype._scriptCallback=function(data){this._script.parentNode.removeChild(this._script);this._script=null;delete window[this._callback];if(this._state!=this._ABORTED){this._done(data,200);}};JAK.Request.prototype._done=function(data,status){this._state=this._DONE;this._userCallback(data,status);};JAK.Request.prototype._timeout=function(){if(this._state!=this._SENT){return;}this.abort();this._state=this._TIMEOUT;this._userCallback();};JAK.Request.prototype._userCallback=function(){var data=this._callbacks[this._state];if(!data){return;}var obj=data[0]||window;var method=data[1];if(obj&&typeof (method)=="string"){method=obj[method];}if(!method){method=obj;obj=window;}method.apply(obj,arguments);};JAK.Request.prototype._buildVBS=function(){var s=JAK.mel("script",{"type":"text/vbscript"});s.text="Function VBS_getByte(data, pos)\n"+"VBS_getByte = AscB(MidB(data, pos+1,1))\n"+"End Function\n"+"Function VBS_getLength(data)\n"+"VBS_getLength = LenB(data)\n"+"End Function";document.getElementsByTagName("head")[0].appendChild(s);};JAK.ISignals=JAK.ClassMaker.makeInterface({"NAME":"JAK.ISignals","VERSION":"2.0","CLASS":"class"});JAK.ISignals.prototype.setInterface=function(interfaceName){if(typeof (this[interfaceName])!="object"){var owner=this._owner;while(typeof (owner[interfaceName])=="undefined"){if(typeof owner.TOP_LEVEL!="undefined"){throw new Error("SetInterface:Interface not found");}else{owner=owner._owner;}}return owner[interfaceName];}};JAK.ISignals.prototype.addListener=function(type,handleFunction,sender){return this.getInterface().addListener(this,type,handleFunction,sender);};JAK.ISignals.prototype.removeListener=function(id){return this.getInterface().removeListener(id);};JAK.ISignals.prototype.makeEvent=function(type,data){this.getInterface().makeEvent(type,this,data);};JAK.ISignals.prototype.setSysMessage=function(msgName,msgValue){this.getInterface().setMessage(msgName,msgValue);};JAK.ISignals.prototype.getSysMessage=function(msgName){return this.getInterface().getMessage(msgName);};JAK.ISignals.prototype.getInterface=function(){return (typeof (this.signals)=="object"?this.signals:JAK.signals);};JAK.Signals=JAK.ClassMaker.makeClass({"NAME":"Signals","VERSION":"2.0","CLASS":"class"});JAK.Signals.prototype.$constructor=function(owner,name){this._owner=owner;this._name=name;this.messageFolder={};this._myHandleFolder={};this._myIdFolder={};};JAK.Signals.prototype.$destructor=function(){};JAK.Signals.prototype.setMessage=function(msgName,msgValue){this.messageFolder[msgName]=msgValue;};JAK.Signals.prototype.getMessage=function(msgName){return this.messageFolder[msgName];};JAK.Signals.prototype.addListener=function(owner,type,funcOrString,sender){if(!(type in this._myHandleFolder)){this._myHandleFolder[type]={};}var typeFolder=this._myHandleFolder[type];for(var id in typeFolder){var item=typeFolder[id];if((item.eFunction==funcOrString)&&(item.eOwner==owner)&&(item.eSender==sender)){return null;}}var id=JAK.idGenerator();typeFolder[id]={"eOwner":owner,"eFunction":funcOrString,"eSender":sender};this._myIdFolder[id]=typeFolder;return id;};JAK.Signals.prototype.removeListener=function(id){var typeFolder=this._myIdFolder[id];if(!typeFolder){return 1;}delete typeFolder[id];delete this._myIdFolder[id];return 0;};JAK.Signals.prototype.makeEvent=function(type,trg,data){var event=new JAK.Signals.NewEvent(type,trg,data);this.myEventHandler(event);};JAK.Signals.NewEvent=function(type,trg,data){this.type=type;this.target=trg;this.timeStamp=new Date().getTime();this.data=(data&&typeof data=="object")?data:null;};JAK.Signals.prototype.myEventHandler=function(myEvent){var functionCache=[];for(var type in this._myHandleFolder){if(type==myEvent.type||type=="*"){for(var p in this._myHandleFolder[type]){var item=this._myHandleFolder[type][p];if(!item.eSender||item.eSender==myEvent.target){functionCache.push(item);}}}}for(var i=0;i<functionCache.length;i++){var item=functionCache[i];var owner=item.eOwner;var fnc=item.eFunction;if(typeof fnc=="string"){owner[fnc](myEvent);}else{if(typeof fnc=="function"){fnc(myEvent);}}}};JAK.signals=new JAK.Signals();JAK.AbstractDecorator=JAK.ClassMaker.makeSingleton({"NAME":"JAK.AbstractDecorator","VERSION":"2.0"});JAK.AbstractDecorator.prototype.decorate=function(instance){instance.$super=this._$super;if(!instance.__decorators){instance.__decorators=[];}instance.__decorators.push(this);return instance;};JAK.AbstractDecorator.prototype._$super=function(){var caller=arguments.callee.caller;if(!caller){throw new Error("Function.prototype.caller not supported");}var decorators=this.__decorators||[];var obj=null;var name=null;var i=decorators.length;while(i--){var d=decorators[i];if(!obj&&name&&(name in d)){obj=d;break;}for(var p in d){if(!name&&caller==d[p]){name=p;break;}}}if(!name){var owner=caller.owner||this.constructor;var callerName=false;for(var name in owner.prototype){if(owner.prototype[name]==caller){callerName=name;}}if(!callerName){throw new Error("Cannot find supplied method in constructor");}var parent=owner.EXTEND;if(!parent){throw new Error("No super-class available");}if(!parent.prototype[callerName]){throw new Error("Super-class doesn't have method '"+callerName+"'");}var func=parent.prototype[callerName];return func.apply(this,arguments);}else{if(!obj){obj=this.constructor.prototype;if(!(name in obj)){throw new Error("Function '"+name+"' has no undecorated parent");}}}return obj[name].apply(this,arguments);};JAK.AutoDecorator=JAK.ClassMaker.makeSingleton({"NAME":"JAK.AutoDecorator","VERSION":"1.0","EXTEND":JAK.AbstractDecorator});JAK.AutoDecorator.prototype.decorate=function(instance){this.$super(instance);var exclude=["constructor","$super","_$super","decorate"];for(var p in this){if(exclude.indexOf(p)!=-1){continue;}instance[p]=this[p];}};JAK.IDecorable=JAK.ClassMaker.makeClass({"NAME":"JAK.IDecorable","VERSION":"2.0","CLASS":"class"});JAK.IDecorable.prototype.decorate=function(decorator){var args=[this];for(var i=1;i<arguments.length;i++){args.push(arguments[i]);}var dec=decorator.getInstance();return dec.decorate.apply(dec,args);};JAK.Logger=JAK.ClassMaker.makeSingleton({"NAME":"JAK.Logger","VERSION":"1.0"});JAK.Logger.ERROR=1;JAK.Logger.WARN=2;JAK.Logger.INFO=3;JAK.Logger.CONSOLE=1<<0;JAK.Logger.ALERT=1<<1;JAK.Logger.URL=1<<2;JAK.Logger.prototype.$constructor=function(){this._mode=JAK.Logger.CONSOLE;this._level=JAK.Logger.INFO;this._url=null;this._levelNames={};this._levelNames[JAK.Logger.ERROR]="Error";this._levelNames[JAK.Logger.WARN]="Warning";this._levelNames[JAK.Logger.INFO]="Info";};JAK.Logger.prototype.setLevel=function(level){this._level=level;return this;};JAK.Logger.prototype.setMode=function(mode){this._mode=mode;return this;};JAK.Logger.prototype.setURL=function(url){this._url=url;};JAK.Logger.prototype.log=function(message,sender,type){var t=type||JAK.Logger.INFO;if(t>this._level){return;}var method=arguments.callee.caller;if(JAK.ILogger&&method==JAK.ILogger.prototype.log){method=method.caller;}var methodName=null;if(sender){for(var p in sender){if(sender[p]==method){methodName=p;break;}}}var from="";from+=(sender?sender.constructor.NAME:"[unknown class]");from+="::";from+=methodName||"[unknown method]";var msg=message||"[no message]";if(this._mode&JAK.Logger.CONSOLE){this._logConsole(msg,from,t);}if(this._mode&JAK.Logger.ALERT){this._logAlert(msg,from,t);}if(this._mode&JAK.Logger.URL){this._logURL(msg,from,t);}};JAK.Logger.prototype._logConsole=function(message,sender,type){if(!window.console){return;}var str=new Date().toString()+" "+sender+" "+message;switch(type){case JAK.Logger.ERROR:console.error(str);break;case JAK.Logger.WARN:console.warn(str);break;case JAK.Logger.INFO:console.info(str);break;default:console.log(str);break;}};JAK.Logger.prototype._logAlert=function(message,sender,type){var str=this._levelNames[type]+" "+new Date().toString()+" "+sender+" "+message;alert(str);};JAK.Logger.prototype._logURL=function(message,sender,type){if(!this._url){return;}var level=this._levelNames[type];var replace={"message":message,"sender":sender,"level":level};var url=this._url.replace(/{([a-z]+)}/ig,function(match,what){if(what in replace){return encodeURIComponent(replace[what]);}return "";});var img=JAK.mel("img",{"src":url});};JAK.ILogger=JAK.ClassMaker.makeInterface({"NAME":"JAK.ILogger","VERSION":"1.0"});JAK.ILogger.prototype.log=function(message,type){return JAK.Logger.getInstance().log(message,this,type);};JAX={"_uid":0};JAX.version="1.7";JAX.DEBUG=false;JAX.ANIMATE_RESOLUTION=24;JAX.ANIMATE_SCALING=true;JAX.METHOD_BOTH=1;JAX.METHOD_SINGLE=2;JAX.__animations=0;JAX.subProc=function(func){return setTimeout(func,1);};JAX.Delay=function(func,time){this.args=[];if(arguments.length>2){for(var i=2;i<arguments.length;i++){this.args.push(arguments[i]);}this.cycle=this._cycle.bind(this);this.func=func;this.timer=setTimeout(this.cycle,time);}else{this.timer=setTimeout(func,time);}};JAX.Delay.prototype._cycle=function(){this.func.apply(this.func,this.args);};JAX.Delay.prototype.stop=function(){clearTimeout(this.timer);};JAX.Interval=function(func,time){this.args=[];if(arguments.length>2){for(var i=2;i<arguments.length;i++){this.args.push(arguments[i]);}this.cycle=this._cycle.bind(this);this.func=func;this.timer=setInterval(this.cycle,time);}else{this.timer=setInterval(func,time);}};JAX.Interval.prototype._cycle=function(){this.func.apply(this.func,this.args);};JAX.Interval.prototype.stop=function(){clearInterval(this.timer);};JAX.IntervalCheck=function(checkfunc,callback,interval,timeout){this.checkfunc=checkfunc;this.callback=callback;this._interval=interval||100;this._time=0;this._timeout=timeout||-1;this.interval=new JAX.Interval(this.check.bind(this),this._interval);};JAX.IntervalCheck.prototype.check=function(){if(this.checkfunc()){this.callback(true);this.stop();}if(this._timeout!=-1){this._time+=this._interval;if(this._time>=this._timeout){this.callback(false);this.stop();}}};JAX.IntervalCheck.prototype.stop=function(){this.interval.stop();};JAX.ElementDecorator={};JAX.ElementDecorator.__decorated=true;JAX.ElementDecorator.__locked=0;JAX.ElementDecoratorArrays=["__animations","__queue","__event_def"];JAX.$=function(query,context,single){var single=!!single;var elms=JAX.query(query,context||false);for(var i=0;i<elms.length;i++){JAX.DecorateElement(elms[i]);}if(single)return elms[0];return new JAX.HTMLCollection(elms);};JAX.$$=function(elm_id){var elm=JAK.gel(elm_id);if(elm===null)return null;JAX.DecorateElement(elm);return elm;};JAX.DecorateElement=function(elm){if(!elm)return false;if(elm.__decorated)return false;for(var method in JAX.ElementDecorator){elm[method]=JAX.ElementDecorator[method];}for(var i=0;i<JAX.ElementDecoratorArrays.length;i++){elm[JAX.ElementDecoratorArrays[i]]=[];}return true;};JAX.HTMLCollection=function(elms){this._htmlCollection=true;this.elements=elms;this.debug="";this.length=elms.length;if(JAX.DEBUG){var txt="";var txt_array=[];for(var i=0;i<elms.length;i++){txt="";txt+=elms[i].tagName;if(elms[i].id)txt+="#"+elms[i].id;if(elms[i].className)txt+="."+elms[i].className;txt_array.push(txt);}this.debug=txt_array.join(", ");};};JAX.HTMLCollection.prototype.process=function(method,args){for(var i=0;i<this.elements.length;i++){var meth=this.elements[i][method];meth.apply(this.elements[i],args);}return this;};JAX.RegisterDecor=function(method,applies_to,func){JAX.ElementDecorator[method]=func;if(applies_to==JAX.METHOD_BOTH){JAX.HTMLCollection.prototype[method]=function(){return this.process(method,arguments);};}else{return function(){throw new Error("JAX: Metodu '"+method+"' nelze pouĹžĂ­t nad kolekcĂ­.");};}};JAX.RegisterDecor("delay",JAX.METHOD_BOTH,function(time){this._lock();this.__delay=new JAX.Delay(this._unlock.bind(this),time);return this;});JAX.RegisterDecor("animate",JAX.METHOD_BOTH,function(len,what,start,end,method){JAX.__animations++;var callback,res,method,intv;this._lock();if(typeof (what)=="string"){this.__anim_callback=JAX.Animation[what];}else{this.__anim_callback=what;}method=method||"LINEAR";if(JAX.ANIMATE_SCALING){res=JAX.ANIMATE_RESOLUTION+parseInt(JAX.__animations/3);}else{res=JAX.ANIMATE_RESOLUTION;}var elm=this;intv=new JAX.Interpolator(start,end,this.__anim_callback.bind(this),this._animateEnd.bind(this),len,res,method,elm);this.__animations.push(intv);return this;});JAX.RegisterDecor("_animateEnd",JAX.METHOD_SINGLE,function(v,elm){this.__anim_callback(v,this);JAX.__animations--;this._unlock();});JAX.RegisterDecor("animateStop",JAX.METHOD_BOTH,function(killAnims){var killAnims=killAnims||true;for(var i=0;i<this.__animations.length;i++){if(killAnims){this.__animations[i].stop();}else{this.__animations[i].endCycle();}}JAX.__animations--;this._unlock();return this;});JAX.RegisterDecor("_lockCheck",JAX.METHOD_SINGLE,function(func,args){if(this.__locked){var a=[];for(var i=0;i<args.length;i++){a.push(args[i]);};this.__queue.push([func,a]);return true;}return false;});JAX.RegisterDecor("_lock",JAX.METHOD_BOTH,function(){this.__locked++;});JAX.RegisterDecor("_unlock",JAX.METHOD_BOTH,function(){if(this.__locked==0)return false;this.__locked--;if(this.__locked==0){var a;while(this.__queue.length!=0){a=this.__queue.pop();this[a[0]].apply(this,a[1]);}}});JAX.RegisterDecor("callFunction",JAX.METHOD_BOTH,function(func){if(this._lockCheck("callFunction",arguments))return this;return func(this);});JAX.RegisterDecor("$",JAX.METHOD_BOTH,function(query,single){return JAX.$(query,this,single||false);});JAX.RegisterDecor("addElement",JAX.METHOD_BOTH,function(def,attrs){if(this._lockCheck("addElement",arguments))return this;var elm=JAX.make(def,attrs||{});this.appendChild(elm);return this;});JAX.RegisterDecor("nextNode",JAX.METHOD_SINGLE,function(query){return JAX.$$(JAX._nodeWalk(this,query,1));});JAX.RegisterDecor("prevNode",JAX.METHOD_SINGLE,function(query){return JAX.$$(JAX._nodeWalk(this,query,-1));});JAX.RegisterDecor("addClass",JAX.METHOD_BOTH,function(cls){if(this._lockCheck("addClass",arguments))return this;JAK.DOM.addClass(this,cls);return this;});JAX.RegisterDecor("removeClass",JAX.METHOD_BOTH,function(cls){if(this._lockCheck("removeClass",arguments))return this;JAK.DOM.removeClass(this,cls);return this;});JAX.RegisterDecor("hasClass",JAX.METHOD_SINGLE,function(cls){return ((" "+this.className.toLowerCase()+" ").indexOf(" "+cls+" ")!=-1);});JAX.RegisterDecor("event",JAX.METHOD_BOTH,function(type,method,obj){if(this._lockCheck("event",arguments))return this;if(obj&&typeof (method)=="string"){method=obj[method].bind(obj);}if(typeof (this.__event_def[type])=="undefined"){this.__event_def[type]=[];}var args=[];for(var i=3;i<arguments.length;i++){args.push(arguments[i]);}this.__event_def[type].push([method,args]);var listener=JAK.Events.addListener(this,type,this,"_eventCallback");this.storeValue("elm.event_"+type,listener);return listener;});JAX.RegisterDecor("_eventCallback",JAX.METHOD_SINGLE,function(e,elm){var df=null;var baseArguments=null;if(typeof (this.__event_def[e.type])!="undefined"){for(var i=0;i<this.__event_def[e.type].length;i++){df=this.__event_def[e.type][i];baseArguments=[e,elm];for(var a=0;a<df[1].length;a++){baseArguments.push(df[1][a]);}df[0].apply(window,baseArguments);}}});JAX.RegisterDecor("removeEvent",JAX.METHOD_BOTH,function(type){if(this._lockCheck("removeEvent",arguments))return this;var evt=this.restoreValue("elm.event_"+type,false);if(evt){JAK.Events.removeListener(evt);}return this;});JAX.RegisterDecor("modify",JAX.METHOD_BOTH,function(attrs){if(this._lockCheck("modify",arguments))return this;if(typeof (attrs)=="function"){attrs(this);}else{JAX.modify(this,attrs||{});}return this;});JAX.RegisterDecor("append",JAX.METHOD_SINGLE,function(elms,anim){if(this._lockCheck("append",arguments))return this;var anim=anim||0;if(!(elms instanceof Array))var elms=[elms];for(var i=0;i<elms.length;i++){this.appendChild(elms[i]);if(anim){JAX.DecorateElement(elms[i]);elms[i].opacity(0);elms[i].opacity(1,anim);}}return this;});JAX.RegisterDecor("remove",JAX.METHOD_BOTH,function(anim){if(this._lockCheck("remove",arguments))return this;var anim=anim||0;if(anim){this.opacity(0,anim,"SQRT",this._remove.bind(this));}else{this._remove();}return this;});JAX.RegisterDecor("_remove",JAX.METHOD_BOTH,function(){this.parentNode.removeChild(this);});JAX.RegisterDecor("storeValue",JAX.METHOD_BOTH,function(uid,value){if(this._lockCheck("storeValue",arguments))return this;if(!this["_store"]){this._store={};}this._store[uid]=value;return this;});JAX.RegisterDecor("restoreValue",JAX.METHOD_BOTH,function(uid,default_value){if(this._lockCheck("restoreValue",arguments))return this;if(!this["_store"]){this._store={};}if(typeof (default_value)!="undefined"){if(typeof (this._store[uid])=="undefined"){return default_value;}}return this._store[uid];});JAX.RegisterDecor("toggle",JAX.METHOD_BOTH,function(time){if(this._lockCheck("toggle",arguments))return this;if(this.restoreValue("elm.show",true)){this.hide(time);}else{this.show(time);};});JAX.RegisterDecor("show",JAX.METHOD_BOTH,function(time,target_opacity,inline){if(this._lockCheck("show",arguments))return this;this.style.display=inline?"inline":"block";this.storeValue("elm.show",true);if(!!time){this.opacity(target_opacity||1,time);}});JAX.RegisterDecor("hide",JAX.METHOD_BOTH,function(time){if(this._lockCheck("hide",arguments))return this;this.storeValue("elm.show",false);if(!!time){this.opacity(0,time,false,this._hide.bind(this));}else{this._hide();}});JAX.RegisterDecor("_hide",JAX.METHOD_BOTH,function(){this.style.display="none";});JAX.RegisterDecor("opacity",JAX.METHOD_BOTH,function(value,time,method,endcallback){if(this._lockCheck("opacity",arguments))return this;var interp=this.restoreValue("elm.opacity_interpolator",false);if(interp)interp.stop();if(!time){this.setOpacity(value);}else{var endcallback=endcallback||this.setOpacity.bind(this);var act_opacity=this.getOpacity();if(value==act_opacity)return false;if(typeof (time)!="number"){var time=500;};var method=method||JAX.Interpolator.default_method;var callback=this.setOpacity.bind(this);var interp=new JAX.Interpolator(act_opacity,value,callback,endcallback,time,25,method);this.storeValue("elm.opacity_interpolator",interp);};return this;});JAX.RegisterDecor("setOpacity",JAX.METHOD_BOTH,function(value){if(this._lockCheck("setOpacity",arguments))return this;this._setOpacity(value);});JAX.RegisterDecor("_setOpacity",JAX.METHOD_BOTH,function(value){if(JAK.Browser.client=="ie"&&JAK.Browser.version<7){this.style.filter="alpha(opacity="+parseInt(value*100)+")";}else{this.style.opacity=value;}});JAX.RegisterDecor("getOpacity",JAX.METHOD_SINGLE,function(){if(JAK.Browser.client=="ie"&&JAK.Browser.version<7){var filter=JAK.DOM.getStyle(this,"filter");if(!filter)return 1;var value=filter.replace(new RegExp("(\\D*)(\\d\\d?\\d?)(.*)","g"),"$2");return parseInt(value)/100;}else{var value=JAK.DOM.getStyle(this,"opacity");if(!value)return 1;return value*1;}});JAX.Animation={};JAX.Animation["height"]=function(value,elm){elm.style.height=parseInt(value)+"px";};JAX.Animation["width"]=function(value,elm){elm.style.width=parseInt(value)+"px";};JAX.Animation["opacity"]=function(value,elm){elm._setOpacity(value);};JAX.Animation["left"]=function(value,elm){elm.style.left=parseInt(value)+"px";};JAX.Animation["top"]=function(value,elm){elm.style.top=parseInt(value)+"px";};JAX.Interpolator=function(startValue,endValue,callback,callback_end,len,resolution,method,arg){this.startValue=startValue*1;this.endValue=endValue*1;this.callback=callback;this.callback_end=callback_end;this.method=method||JAX.Interpolator.default_method;if(typeof (this.method)=="string"){this.method=JAX.Interpolator.methods[this.method];}this.res=resolution||25;this.len=len||100;this.arg=arg||null;this.value=0;this.running=true;this.timer=new JAX.Interval(this.cycle.bind(this),this.res);};JAX.Interpolator.default_method="SQRT";JAX.Interpolator.methods={"LINEAR":function(v){return v;},"QUAD":function(v){return v*v;},"SQRT":function(v){return Math.sqrt(v);},"SIN":function(v){return (Math.sin(Math.PI*(v-0.5))+1)/2;},"ASIN":function(v){return (Math.asin(2*(v-0.5))+Math.PI/2)/Math.PI;}};JAX.Interpolator.prototype.stop=function(){if(!this.running)return;this.timer.stop();this.value=0;this.running=false;};JAX.Interpolator.prototype.endCycle=function(){this.stop();this.callback_end(this.endValue,this.arg);};JAX.Interpolator.prototype.cycle=function(){this.value+=this.res;if(this.value>=this.len){this.endCycle();}else{var v=this.value/this.len;v=this.method(v);v=this.startValue+((this.endValue-this.startValue)*v);this.callback(v,this.arg);}};JAX._nodeWalk=function(node,query,dir){var dir=dir||1;var queryObject=JAX._queryparse(query);var elms=JAK.DOM.arrayFromCollection(document.getElementsByTagName("*"));var index=elms.indexOf(node);if(dir==1){for(var i=index+1;i<elms.length;i++){if(JAX._query_checkElm(elms[i],queryObject,0)){return JAX.$$(elms[i]);}}}else{for(var i=index-1;i>=0;i--){if(JAX._query_checkElm(elms[i],queryObject,0)){return JAX.$$(elms[i]);}}}return false;};JAX.DOMBuilder=function(doc){this.doc=doc||document;this.decorating=true;this.frag=JAX.$$(document.createDocumentFragment());this.pointer=this.frag;};JAX.DOMBuilder.prototype.addBox=function(def,attrs){var elm=JAX.make(def,attrs||false,this.doc,!this.decorating);this.pointer.appendChild(elm);this.pointer=elm;return elm;};JAX.DOMBuilder.prototype.endBox=function(){try{this.pointer=this.pointer.parentNode;}catch(e){}};JAX.DOMBuilder.prototype.addText=function(txt){var elm=this.doc.createTextNode(txt);this.pointer.appendChild(elm);return elm;};JAX.DOMBuilder.prototype.add=function(def,attrs){var elm=JAX.make(def,attrs||false,this.doc,!this.decorating);this.pointer.appendChild(elm);return elm;};JAX.DOMBuilder.prototype.getDom=function(){return this.frag;};JAX.make=function(q,attrs,doc,nodecor){var attrs=attrs||false;var doc=doc||document;var def=JAX._queryparse(q);if(def.tag==""){throw new Error("JAX.make: Tag name is required.");}var elm=doc.createElement(def.tag);if(!nodecor){elm=JAX.$$(elm);}if(def.className.length){elm.className=def.className.join(" ");}if(def.id){elm.id=def.id;}if(attrs){JAX.modify(elm,attrs);}return elm;};JAX.mmake=function(q,number,func,doc,nodecor){var _elms=[];var elm=null;for(var i=0;i<number;i++){elm=JAX.make(q,{},doc||document,nodecor||false);func(elm,i);_elms.push(elm);}return _elms;};JAX._elmAttrs=["href","src","disabled","type","for","id"];JAX._elmEvents=["click","dblclick","mousedown","mouseup","mousemove","keydown","keyup","keypress","mouseover","mouseout"];JAX._units=function(str){if(str.indexOf("px")!=-1||str.indexOf("%")!=-1){return str;}return str+"px";};JAX.modify=function(elm,attrs){if(!attrs)return elm;for(var i in attrs){var v=attrs[i];if(JAX._elmEvents.indexOf(i)!=-1){JAX.DecorateElement(elm);elm.event(i,v);}}for(var i in attrs){var v=attrs[i];if(JAX._elmAttrs.indexOf(i)!=-1){elm.setAttribute(i,v);}else{if(JAX._elmEvents.indexOf(i)!=-1){continue;}else{if(i=="html"){elm.innerHTML=v;}else{if(i=="title"){elm.setAttribute("title",v);elm.setAttribute("alt",v);}else{if(i=="htmladd"){elm.innerHTML+=v;}else{if(i=="position"){elm.style.position=(v=="abs")?"absolute":(v=="rel"?"relative":v);}else{if(i=="width"){elm.style.width=JAX._units(v);}else{if(i=="height"){elm.style.height=JAX._units(v);}else{if(i=="left"){elm.style.left=JAX._units(v);}else{if(i=="top"){elm.style.left=JAX._units(v);}else{if(i=="style"){for(var s in attrs[i]){elm.style[s]=v[s];}}else{elm[i]=v;}}}}}}}}}}}}return elm;};JAX._queryparse=function(query){var ob={"id":"","tag":"","className":[],"pseudoClasses":[]};var e="t";var ci=-1;var pi=-1;for(var n=0;n<query.length;n++){var chr=query.charAt(n);if(chr=="#"){e="i";continue;};if(chr=="."){e="c";if(ci>=0)ob.className[ci]+=" ";ci++;ob.className.push(" ");continue;};if(chr==":"){e="p";pi++;ob.pseudoClasses.push("");continue;};if(e=="c")ob.className[ci]+=chr;if(e=="t")ob.tag+=chr;if(e=="i")ob.id+=chr;if(e=="p")ob.pseudoClasses[pi]+=chr;}return ob;};JAX._query_checkElm=function(elm,ob,index,count){if(elm.nodeType!=1)return false;var index=index||0;var count=count||1;if(ob.className){for(var c=0;c<ob.className.length;c++){if((" "+elm.className+" ").indexOf(ob.className[c])==-1)return false;}}if(ob.tag&&elm.tagName.toLowerCase()!=ob.tag.toLowerCase())return false;if(ob.id!=""){if(typeof (elm.id)=="string"){var _id=elm.getAttribute("id");if(!_id)return false;if(_id.toLowerCase()!=ob.id.toLowerCase())return false;}else{return false;}}if(ob.pseudoClasses){var pseudo;for(var c=0;c<ob.pseudoClasses.length;c++){pseudo=ob.pseudoClasses[c];if(pseudo=="first"&&index!=0)return false;if(pseudo=="even"&&index%2==0)return false;if(pseudo=="odd"&&index%2!=0)return false;if(pseudo=="last"&&index!=count-1)return false;}}return true;};JAX.query=function(query,context){var context=context||document;if(query.indexOf(",")!=-1){query=query.split(",");var nodes=[];var result=[];for(var i=0;i<query.length;i++){result=JAX.query(query[i],context);nodes=nodes.concat(result);}return nodes;}var working,elms,elm,el,_context,ob,work;if(query.indexOf(" ")!=-1){query=query.split(" ");}else{query=[query];}working=[context];for(var i=0;i<query.length;i++){ob=JAX._queryparse(query[i]);work=[];for(var r=0;r<working.length;r++){_context=working[r];if(ob.className.length!=0&&_context.getElementsByClassName){elms=_context.getElementsByClassName(ob.className[0]);}else{elms=_context.getElementsByTagName(ob.tag||"*");}for(var e=0;e<elms.length;e++){if(JAX._query_checkElm(elms[e],ob,e,elms.length)){work.push(elms[e]);}}}working=work;}return working;};JAK.IComponents=JAK.ClassMaker.makeInterface({"NAME":"JAK.IComponents","VERSION":"3.0"});JAK.IComponents.prototype.hasComponents=function(){return !!((this.components instanceof Array)&&this.components.length);};JAK.IComponents.prototype.addAllComponents=function(){if(!this.hasComponents()){return false;}for(var i=0;i<this.components.length;i++){this._addComponent(this.components[i]);}return true;};JAK.IComponents.prototype.addNewComponent=function(component){if(!this.hasComponents()){this.components=new Array();}this.components.push(component);this._addComponent(component);};JAK.IComponents.prototype._addComponent=function(component){if(typeof (component.part)=="undefined"){throw new Error("Invalid component named '"+component.name+"'");}var ctor=component.part;var inst=null;if(typeof (ctor)=="object"){inst=ctor;component.part=inst.constructor;}if(typeof (component.name)=="undefined"){component.name=ctor.NAME.substring(0,1).toLowerCase();component.name+=ctor.NAME.substring(1);}if(!inst){inst=new ctor(this,component.name,component.setting);}this[component.name]=inst;};JAK.IComponents.prototype.registredMethod=function(owner){var fields=[this,this.constructor];for(var i=0;i<fields.length;i++){var obj=fields[i];for(var j in obj){if(typeof (obj[j])=="undefined"){continue;}var method=obj[j];if(method===null){continue;}if(typeof (method.access)=="undefined"){continue;}if(method.access.indexOf("public")!=0){continue;}var prefix=(obj==this?this._name:this.constructor.NAME);var name=this._createMethodName(method,prefix,j);if(typeof (owner[name])!="undefined"){;throw new Error("registredMethod: method \""+name+"\" already exist!");}owner[name]=method.bind(obj);}}};JAK.IComponents.prototype.unregistredMethod=function(owner){var fields=[this,this.constructor];for(var i=0;i<fields.length;i++){var obj=fields[i];for(var j in obj){if(typeof (obj[j])=="undefined"){continue;}var method=obj[j];if(method===null){continue;}if(typeof (method.access)=="undefined"){continue;}if(method.access.indexOf("public")!=0){continue;}var prefix=(obj==this?this._name:this.constructor.NAME);var name=this._createMethodName(method,prefix,j);if(typeof (owner[name])=="undefined"){continue;}delete (owner[name]);}}};JAK.IComponents.prototype._createMethodName=function(method,prefix,methodName){var nameFirstChar=methodName.substring(0,1).toUpperCase();var nameNext=methodName.substring(1);var mods=method.access.replace(/[ ]{2,}/gi," ").split(" ");if(mods.length>1){return mods[1];}else{return prefix+nameFirstChar+nameNext;}};JAK.IComponents.prototype.getMain=function(){var obj=this;while(typeof obj.TOP_LEVEL=="undefined"){if(typeof obj._owner=="undefined"){throw new Error("can't find TOP LEVEL Class");}else{obj=obj._owner;}}return obj;};JAK.IComponents.prototype.callChildDestructor=function(){this.inDestruction=true;if(!this.hasComponents()){return false;}for(var i=0;i<this.components.length;i++){var cName=this.components[i].name;if(this[cName]==null){continue;}if((typeof this[cName].constructor.NAME!="undefined")&&(typeof this[cName].inDestruction!="boolean")){var name="$destructor";if((typeof this[cName][name]!="undefined")&&(typeof this[cName][name]=="function")){this[cName][name]();}this[cName]=null;}}};JAK.IComponents.prototype.removeComponent=function(component,withDestruction){for(var i=0;i<this.components.length;i++){var c=this.components[i];if(component==c.name||component==this[c.name]){if(withDestruction&&(typeof this[c.name].$destructor=="function")){this[c.name].$destructor();}this[c.name]=null;c=null;this.components.splice(i,1);break;}}};JAK.Timekeeper=JAK.ClassMaker.makeSingleton({"NAME":"JAK.Timekeeper","VERSION":"1.0"});JAK.Timekeeper.prototype.$constructor=function(){this._delay=20;this._listeners=[];this._interval=null;this._tick=this._tick.bind(this);};JAK.Timekeeper.prototype.addListener=function(what,method,count){var index=this._findListener(what);if(index!=-1){throw new Error("This listener is already attached");}var obj={"what":what,"method":method,"count":count||1,"bucket":0};obj.bucket=obj.count;this._listeners.push(obj);if(!this._interval){this._interval=setInterval(this._tick,this._delay);}return this;};JAK.Timekeeper.prototype.removeListener=function(what){var index=this._findListener(what);if(index==-1){throw new Error("Cannot find listener to be removed");}this._listeners.splice(index,1);if(!this._listeners.length){clearInterval(this._interval);this._interval=null;}return this;};JAK.Timekeeper.prototype._findListener=function(what){for(var i=0;i<this._listeners.length;i++){if(this._listeners[i].what==what){return i;}}return -1;};JAK.Timekeeper.prototype._tick=function(){for(var i=0;i<this._listeners.length;i++){var item=this._listeners[i];item.bucket--;if(item.bucket){continue;}item.bucket=item.count;var obj=item.what;var method=(typeof (item.method)=="string"?obj[item.method]:item.method);method.call(obj);}};JAK.Interpolator=JAK.ClassMaker.makeClass({"NAME":"JAK.Interpolator","VERSION":"2.1","DEPEND":[{"sClass":JAK.Timekeeper,"ver":"1.0"}]});JAK.Interpolator.LINEAR=1;JAK.Interpolator.QUADRATIC=2;JAK.Interpolator.SQRT=3;JAK.Interpolator.SIN=4;JAK.Interpolator.ASIN=5;JAK.Interpolator.prototype.$constructor=function(startVal,endVal,interval,callback,options){this.startVal=startVal;this.endVal=endVal;this.interval=interval;this.callback=callback;this.options={"interpolation":JAK.Interpolator.LINEAR,"count":1,"endCallback":false};this.running=false;for(var p in options){this.options[p]=options[p];}};JAK.Interpolator.prototype._call=function(frac){var result=this._interpolate(frac);var delta=this.endVal-this.startVal;this.callback(this.startVal+delta*result);};JAK.Interpolator.prototype._interpolate=function(val){if(typeof (this.options.interpolation)=="function"){return this.options.interpolation(val);}switch(this.options.interpolation){case JAK.Interpolator.QUADRATIC:return val*val;case JAK.Interpolator.SQRT:return Math.sqrt(val);case JAK.Interpolator.SIN:return (Math.sin(Math.PI*(val-0.5))+1)/2;case JAK.Interpolator.ASIN:return (Math.asin(2*(val-0.5))+Math.PI/2)/Math.PI;default:return val;}};JAK.Interpolator.prototype.start=function(){if(this.running){return;}this.running=true;this.startTime=(new Date()).getTime();this._call(0);JAK.Timekeeper.getInstance().addListener(this,"_tick",this.options.count);};JAK.Interpolator.prototype.stop=function(){if(!this.running){return;}this.running=false;JAK.Timekeeper.getInstance().removeListener(this);};JAK.Interpolator.prototype._tick=function(){var now=(new Date()).getTime();var elapsed=now-this.startTime;if(elapsed>=this.interval){this.stop();this._call(1);if(this.options.endCallback){this.options.endCallback();}}else{this._call(elapsed/this.interval);}};JAK.CSSInterpolator=JAK.ClassMaker.makeClass({"NAME":"CSSInterpolator","VERSION":"2.0"});JAK.CSSInterpolator.prototype.$constructor=function(elm,interval,options){this.elm=elm;this.properties=[];this.colors=[];this._tick=this._tick.bind(this);this.interpolator=new JAK.Interpolator(0,1,interval,this._tick,options);};JAK.CSSInterpolator.prototype.addProperty=function(property,startVal,endVal,suffix){var o={"property":property,"startVal":startVal,"endVal":endVal,"suffix":suffix||""};this.properties.push(o);};JAK.CSSInterpolator.prototype.addColorProperty=function(property,startVal,endVal){var o={"startVal":JAK.Parser.color(startVal),"endVal":JAK.Parser.color(endVal),"property":property};this.colors.push(o);};JAK.CSSInterpolator.prototype.start=function(){this.interpolator.start();};JAK.CSSInterpolator.prototype.stop=function(){this.interpolator.stop();};JAK.CSSInterpolator.prototype._setOpacity=function(obj,prop,frac){var property="";var val=prop.startVal+frac*(prop.endVal-prop.startVal);if(JAK.Browser.client=="ie"&&JAK.Browser.version<9){property="filter";val=Math.round(100*val);val="progid:DXImageTransform.Microsoft.Alpha(opacity="+val+");";}else{property="opacity";}obj[property]=val;};JAK.CSSInterpolator.prototype._tick=function(frac){for(var i=0;i<this.properties.length;i++){var prop=this.properties[i];switch(prop.property){case "opacity":this._setOpacity(this.elm.style,prop,frac);break;default:var val=prop.startVal+frac*(prop.endVal-prop.startVal);val+=prop.suffix;this.elm.style[prop.property]=val;break;}}var names=["r","g","b"];for(var i=0;i<this.colors.length;i++){var c=this.colors[i];var out=[0,0,0];for(var j=0;j<names.length;j++){var name=names[j];out[j]=c.startVal[name]+Math.round(frac*(c.endVal[name]-c.startVal[name]));}var result="rgb("+out.join(",")+")";this.elm.style[c.property]=result;}};JAK.Calendar=JAK.ClassMaker.makeClass({"NAME":"JAK.Calendar","VERSION":"3.0","IMPLEMENT":JAK.ISignals});JAK.Calendar.prototype.$constructor=function(optObj){this.options={"defaultFormat":["j.n.Y"],"today":"Dnes","monthNames":Date.prototype._monthNames,"monthNamesShort":Date.prototype._monthNamesShort,"dayNames":Date.prototype._dayNamesShort,"rollerDelay":200,"pickTime":false,"lockWindow":false};for(var p in optObj){if(p=="defaultFormat"){if(!optObj[p] instanceof Array){optObj[p]=[optObj[p]];}}this.options[p]=optObj[p];}this._dom={};this._days=[];this._rollers=[];this.ec=[];this._visible=false;this.ec.push(JAK.Events.addListener(document,"keydown",this,"_handleKey"));this.ec.push(JAK.Events.addListener(document,"mousedown",this,"_handleDown"));this.ec.push(JAK.Events.addListener(window,"unload",this,"$destructor"));this.ec.push(JAK.Events.addListener(document,"mouseup",this,"_handleUp"));};JAK.Calendar.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}for(var p in this){this[p]=null;}};JAK.Calendar.manage=function(calendar,clickElm,targetElm){var callback=function(){clickElm.focus();for(var i=0;i<targetElm.length;i++){JAK.gel(targetElm[i]).value=arguments[i]?arguments[i]:"";}};var click=function(e,elm){var pos=JAK.DOM.getBoxPosition(clickElm);var x=pos.left;var y=pos.top+clickElm.offsetHeight+1;clickElm.blur();calendar.pick(x,y,JAK.gel(targetElm[0]).value,callback);};calendar.ec.push(JAK.Events.addListener(clickElm,"click",window,click));};JAK.Calendar.setup=function(imageUrl,label,optObj){var c=new JAK.Calendar(optObj);for(var i=3;i<arguments.length;i++){var click=false;var input=arguments[i];if(!(input instanceof Array)){input=[JAK.gel(input)];}click=JAK.Calendar._createButton(imageUrl,label);var lastInput=JAK.gel(input[input.length-1]);lastInput.parentNode.insertBefore(click,lastInput.nextSibling);JAK.Calendar.manage(c,click,input);}return c;};JAK.Calendar._createButton=function(imageUrl,label){if(imageUrl){click=JAK.mel("img",{"className":"cal-launcher"},{"cursor":"pointer"});click.src=imageUrl;click.alt=label;click.title=label;}else{click=JAK.cel("input","cal-launcher");click.type="button";click.value=label;}return click;};JAK.Calendar.prototype.useDate=function(date){if(this.options.pickTime){date.setHours(this._dom.hour.value);date.setMinutes(this._dom.minute.value);}var results=[];for(var i=0;i<this.options.defaultFormat.length;i++){var str=date.format(this.options.defaultFormat[i]);results.push(str);}this.callback.apply(null,results);};JAK.Calendar.prototype.equalDates=function(d1,d2){return d1.getFullYear()==d2.getFullYear()&&d1.getMonth()==d2.getMonth()&&d1.getDate()==d2.getDate();};JAK.Calendar.prototype._handleDown=function(e,elm){if(!this._visible){return;}this._hide();};JAK.Calendar.prototype._cancelDown=function(e,elm){JAK.Events.stopEvent(e);};JAK.Calendar.prototype._handleUp=function(e,elm){if(this.eventMove){JAK.Events.removeListener(this.eventMove);this.eventMove=false;}if(JAK.Calendar.Button._activeElement){JAK.DOM.removeClass(JAK.Calendar.Button._activeElement,"mousedown");JAK.Calendar.Button._activeElement=false;}this._timer=false;for(var i=0;i<this._rollers.length;i++){this._rollers[i]._hide();}};JAK.Calendar.prototype._handleMove=function(e,elm){if(!this._visible){return;}this._removeRanges();JAK.Events.cancelDef(e);var dx=e.clientX-this._clientX;var dy=e.clientY-this._clientY;var pos=JAK.DOM.getBoxPosition(this._dom.container);var newx=pos.left+dx;var newy=pos.top+dy;if(this.options.lockWindow&&(newx<0||newy<0)){return;}this._dom.container.style.left=newx+"px";this._dom.container.style.top=newy+"px";var pos=JAK.DOM.getBoxPosition(this._dom.container);this._clientX=e.clientX;this._clientY=e.clientY;};JAK.Calendar.prototype._removeRanges=function(){var selObj=false;if(document.getSelection&&!JAK.Browser.client!="gecko"){selObj=document.getSelection();}if(window.getSelection){selObj=window.getSelection();}if(document.selection){selObj=document.selection;}if(selObj){if(selObj.empty){selObj.empty();}if(selObj.removeAllRanges){selObj.removeAllRanges();}}};JAK.Calendar.prototype._dragDown=function(e,elm){JAK.Events.cancelDef(e);this.eventMove=JAK.Events.addListener(document,"mousemove",this,"_handleMove");this._clientX=e.clientX;this._clientY=e.clientY;};JAK.Calendar.prototype.pick=function(x,y,date,callback){this._draw();this._dom.container.style.left=x+"px";this._dom.container.style.top=y+"px";this.selectedDate=new Date();if(date){this.selectedDate=JAK.Calendar.parseDate(date instanceof Array?date[0]:date);}this.currentDate=new Date(this.selectedDate);this.currentDate.setDate(1);this.callback=callback;this._switchTo();};JAK.Calendar.prototype._draw=function(){if(!("container" in this._dom)){this._buildDom();document.body.appendChild(this._dom.container);}this._show();};JAK.Calendar.prototype._help=function(){alert("VĂ˝bÄr data:\n - PouĹžijte ÂŤ, Âť tlaÄĂ­tka pro vybrĂĄnĂ­ roku\n - PouĹžijte âš, âş tlaÄĂ­tka pro vybrĂĄnĂ­ mÄsĂ­ce\n - Menu pro rychlejĹĄĂ­ vĂ˝bÄr se zobrazĂ­ po delĹĄĂ­m stisku vĂ˝ĹĄe uvedenĂ˝ch tlaÄĂ­tek\n - StisknutĂ­m mezernĂ­ku zvolĂ­te dneĹĄnĂ­ datum");};JAK.Calendar.prototype._buildDom=function(){this._dom.container=JAK.mel("div",null,{"position":"absolute"});this._dom.content=JAK.cel("div","cal-content");this._dom.table=JAK.cel("table");this._dom.thead=JAK.cel("thead");this._dom.tbody=JAK.cel("tbody");this._dom.tfoot=JAK.cel("tfoot");this._dom.table.cellSpacing=0;this._dom.table.cellPadding=0;if(JAK.Browser.client=="ie"){this._dom.iframe=JAK.mel("iframe",null,{"position":"absolute","left":"0px","top":"0px","zIndex":1});this._dom.content.style.zIndex=2;JAK.DOM.append([this._dom.container,this._dom.iframe,this._dom.content],[this._dom.content,this._dom.table]);}else{JAK.DOM.append([this._dom.container,this._dom.content],[this._dom.content,this._dom.table]);}JAK.DOM.append([this._dom.table,this._dom.thead,this._dom.tbody,this._dom.tfoot]);var r1=JAK.cel("tr");var r2=JAK.cel("tr");var r3=JAK.cel("tr");JAK.DOM.append([this._dom.thead,r1,r2,r3]);var help=new JAK.Calendar.Nav(this,"?","NĂĄpovÄda",this._help);this._dom.move=JAK.cel("td","cal-title");var close=new JAK.Calendar.Nav(this,"&times;","ZavĹĂ­t kalendĂĄĹ",this._hide);this._dom.move.colSpan=6;JAK.DOM.append([r1,help.td,this._dom.move,close.td]);var x=" (podrĹž pro menu)";var buttonLabels=["&laquo;","&lsaquo;",this.options.today,"&rsaquo;","&raquo;"];var buttonStatuses=["PĹedchozĂ­ rok"+x,"PĹedchozĂ­ mÄsĂ­c"+x,this.options.today,"NĂĄsledujĂ­cĂ­ mÄsĂ­c"+x,"NĂĄsledujĂ­cĂ­ rok"+x];var buttonMethods=[this._yearB,this._monthB,this._monthC,this._monthF,this._yearF];this._dom.buttons=[];for(var i=0;i<buttonLabels.length;i++){var button=new JAK.Calendar.Nav(this,buttonLabels[i],buttonStatuses[i],buttonMethods[i]);JAK.DOM.addClass(button.td,"cal-button cal-nav");this._dom.buttons.push(button.td);r2.appendChild(button.td);}this._dom.buttons[2].colSpan=4;var wk=JAK.cel("td","cal-dayname cal-wn");wk.innerHTML="wk";r3.appendChild(wk);for(var i=0;i<this.options.dayNames.length;i++){var day=JAK.cel("td","cal-dayname");day.innerHTML=this.options.dayNames[i];r3.appendChild(day);if(i>4){JAK.DOM.addClass(day,"cal-weekend");}}this._dom.rows=[];for(var i=0;i<42;i++){var day=new JAK.Calendar.Day(this);this._days.push(day);if(!(i%7)){var tr=JAK.cel("tr");this._dom.rows.push(tr);this._dom.tbody.appendChild(tr);this.ec.push(JAK.Events.addListener(tr,"mouseover",this,"_overRef"));this.ec.push(JAK.Events.addListener(tr,"mouseout",this,"_outRef"));var wk=JAK.cel("td","cal-wn cal-day");tr.appendChild(wk);}JAK.DOM.addClass(day.td,"cal-day");tr.appendChild(day.td);if(i%7>4){JAK.DOM.addClass(day.td,"cal-weekend");}}var tr=JAK.cel("tr");this._dom.status=JAK.cel("td","cal-status");this._dom.status.colSpan=this.options.pickTime?6:8;JAK.DOM.append([this._dom.tfoot,tr],[tr,this._dom.status]);this._dom.status.innerHTML="Vyberte datum";if(this.options.pickTime){var td=JAK.cel("td","cal-time");td.colSpan=2;var inputHour=JAK.cel("input");inputHour.type="text";this._dom.hour=inputHour;var sep=JAK.ctext(":");var inputMinute=JAK.cel("input");inputMinute.type="text";this._dom.minute=inputMinute;JAK.DOM.append([td,inputHour],[td,sep],[td,inputMinute],[tr,td]);this.ec.push(JAK.Events.addListener(this._dom.hour,"keydown",this,"_keyDown"));this.ec.push(JAK.Events.addListener(this._dom.minute,"keydown",this,"_keyDown"));}for(var i=0;i<this._dom.buttons.length;i++){if(i==2){continue;}var type=(i==1||i==3?0:(i<2?-1:1));var roller=new JAK.Calendar.Roller(this,this._dom.buttons[i],type,i>2);this._rollers.push(roller);}this.ec.push(JAK.Events.addListener(this._dom.move,"mousedown",this,"_dragDown"));this.ec.push(JAK.Events.addListener(this._dom.status,"mousedown",this,"_dragDown"));this.ec.push(JAK.Events.addListener(this._dom.container,"mousedown",this,"_cancelDown"));};JAK.Calendar.prototype._keyDown=function(e,elm){if(e.keyCode==13){if(this.callback){this.useDate(this.selectedDate);}this.makeEvent("datepick");this._hide();}};JAK.Calendar.prototype._handleKey=function(e,elm){if(!this._visible){return;}if(e.keyCode==32){this._monthC();}if(e.keyCode==27){this._hide();}};JAK.Calendar.prototype._overRef=function(e,elm){JAK.DOM.addClass(elm,"mouseover");};JAK.Calendar.prototype._outRef=function(e,elm){JAK.DOM.removeClass(elm,"mouseover");};JAK.Calendar.prototype._hide=function(){this._dom.container.style.display="none";this._visible=false;this.makeEvent("calendarHide");};JAK.Calendar.prototype._show=function(){this.makeEvent("calendarShow");this._dom.container.style.display="block";this._visible=true;};JAK.Calendar.prototype._getWeekNumber=function(date){var d=new Date(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);var DoW=d.getDay();d.setDate(d.getDate()-(DoW+6)%7+3);var ms=d.valueOf();d.setMonth(0);d.setDate(4);return Math.round((ms-d.valueOf())/(7*86400000))+1;};JAK.Calendar.prototype._switchTo=function(){for(var i=0;i<this._dom.rows.length;i++){this._dom.rows[i].style.display="";}var tmpDate=new Date(this.currentDate);tmpDate.setDate(1);var oneDay=1000*60*60*24;var weekIndex=(tmpDate.getDay()+6)%7;if(weekIndex){tmpDate.setTime(tmpDate.getTime()-weekIndex*oneDay);}var index=0;var today=new Date();var lastVisible=-1;for(var row=0;row<6;row++){var wn=this._dom.rows[row].firstChild;wn.innerHTML=this._getWeekNumber(tmpDate);for(var col=0;col<7;col++){var day=this._days[index];day.date=new Date(tmpDate);day.redraw(today);tmpDate.setTime(tmpDate.getTime()+oneDay);if(tmpDate.getMonth()==this.currentDate.getMonth()&&lastVisible==-1){lastVisible=0;}if(tmpDate.getMonth()!=this.currentDate.getMonth()&&lastVisible==0){lastVisible=row+1;}index++;}}for(var i=lastVisible;i<6;i++){this._dom.rows[i].style.display="none";}if(this.options.pickTime){this._dom.hour.value=this.selectedDate.getHours().toString().lpad();this._dom.minute.value=this.selectedDate.getMinutes().toString().lpad();}this._dom.move.innerHTML=this.options.monthNames[this.currentDate.getMonth()]+" "+this.currentDate.getFullYear();if(JAK.Browser.client=="ie"){this._dom.iframe.style.width=this._dom.content.offsetWidth+"px";this._dom.iframe.style.height=this._dom.content.offsetHeight+"px";}};JAK.Calendar.prototype._yearF=function(e,elm){this.currentDate.setFullYear(this.currentDate.getFullYear()+1);this._switchTo();};JAK.Calendar.prototype._yearB=function(e,elm){this.currentDate.setFullYear(this.currentDate.getFullYear()-1);this._switchTo();};JAK.Calendar.prototype._monthB=function(e,elm){this.currentDate.setMonth((this.currentDate.getMonth()+11)%12);if(this.currentDate.getMonth()==11){this.currentDate.setFullYear(this.currentDate.getFullYear()-1);}this._switchTo();};JAK.Calendar.prototype._monthF=function(e,elm){this.currentDate.setMonth((this.currentDate.getMonth()+1)%12);if(this.currentDate.getMonth()==0){this.currentDate.setFullYear(this.currentDate.getFullYear()+1);}this._switchTo();};JAK.Calendar.prototype._monthC=function(e){this.currentDate=new Date();this.currentDate.setDate(1);this._switchTo();};JAK.Calendar.parseDate=function(date){var selectedDate=new Date();var separators="[-/\\\\:.]";var chars="[0-9]";var patterns=["^ *("+chars+"{1,2}) *"+separators+" *("+chars+"{1,2}) *"+separators+" *("+chars+"{1,2})","^ *("+chars+"{4}) *"+separators+" *("+chars+"{1,2}) *"+separators+" *("+chars+"{1,2})","^ *("+chars+"{1,2}) *"+separators+" *("+chars+"{1,2}) *"+separators+" *("+chars+"{4})"];var datePattern="( +"+chars+"{1,2})?("+separators+chars+"{1,2})?("+separators+chars+"{1,2})? *$";var r=false;var index=0;while(!result&&index<patterns.length){var re=new RegExp(patterns[index]+datePattern);var result=re.exec(date);index++;}if(result){selectedDate=new Date(0);var a=Math.round(parseFloat(result[1]));var b=Math.round(parseFloat(result[2]));var c=Math.round(parseFloat(result[3]));var yearIndex=-1;if(result[1].length==4){yearIndex=0;}else{if(result[3].length==4){yearIndex=2;}else{if(a>31){a=a+(a>selectedDate.getFullYear()-2000?1900:2000);yearIndex=0;}else{c=c+(c>selectedDate.getFullYear()-2000?1900:2000);yearIndex=2;}}}if(yearIndex==0){selectedDate.setFullYear(a);selectedDate.setDate(1);var max=Math.max(b,c);var min=Math.min(b,c);if(max>13){selectedDate.setMonth(min-1);selectedDate.setDate(max);}else{selectedDate.setMonth(b-1);selectedDate.setDate(c);}}else{if(yearIndex==2){selectedDate.setFullYear(c);var max=Math.max(a,b);var min=Math.min(a,b);if(max>13){selectedDate.setMonth(min-1);selectedDate.setDate(max);}else{selectedDate.setMonth(b-1);selectedDate.setDate(a);}}}if(result[4]){var h=parseInt(result[4].match(/[0-9]+/)[0],10);var m=(result[5]?parseInt(result[5].match(/[0-9]+/)[0],10):0);var s=(result[6]?parseInt(result[6].match(/[0-9]+/)[0],10):0);selectedDate.setHours(h);selectedDate.setMinutes(m);selectedDate.setSeconds(s);}}return selectedDate;};JAK.Calendar.Button=JAK.ClassMaker.makeInterface({"NAME":"JAK.Calendar.Button","VERSION":"2.0"});JAK.Calendar.Button._activeElement=false;JAK.Calendar.Button.prototype._over=function(e,elm){if(!JAK.Calendar.Button._activeElement){JAK.DOM.addClass(elm,"mouseover");}};JAK.Calendar.Button.prototype._out=function(e,elm){JAK.DOM.removeClass(elm,"mouseover");};JAK.Calendar.Button.prototype._down=function(e,elm){JAK.Events.cancelDef(e);JAK.Calendar.Button._activeElement=elm;JAK.DOM.addClass(elm,"mousedown");};JAK.Calendar.Button.prototype._up=function(e,elm){};JAK.Calendar.Button.prototype.addOverEvents=function(elm){this.calendar.ec.push(JAK.Events.addListener(elm,"mouseover",this,"_over"));this.calendar.ec.push(JAK.Events.addListener(elm,"mouseout",this,"_out"));};JAK.Calendar.Button.prototype.addDownEvents=function(elm){this.calendar.ec.push(JAK.Events.addListener(elm,"mousedown",this,"_down"));};JAK.Calendar.Nav=JAK.ClassMaker.makeClass({"NAME":"JAK.Calendar.Nav","VERSION":"2.0","IMPLEMENT":JAK.Calendar.Button});JAK.Calendar.Nav.prototype.$constructor=function(calendar,label,status,method){this.td=JAK.cel("td","cal-button");this.td.innerHTML=label;this.status=status;this.calendar=calendar;this.method=method;this.calendar.ec.push(JAK.Events.addListener(this.td,"mouseover",this,"_changeStatus"));this.calendar.ec.push(JAK.Events.addListener(this.td,"mouseout",this,"_changeStatus"));this.calendar.ec.push(JAK.Events.addListener(this.td,"mouseup",this,"_up"));this.addOverEvents(this.td);this.addDownEvents(this.td);};JAK.Calendar.Nav.prototype._changeStatus=function(){if(this.oldStatus){this.calendar._dom.status.innerHTML=this.oldStatus;this.oldStatus=false;}else{this.oldStatus=this.calendar._dom.status.innerHTML;this.calendar._dom.status.innerHTML=this.status;}};JAK.Calendar.Nav.prototype._up=function(e,elm){if(JAK.Calendar.Button._activeElement){JAK.DOM.removeClass(JAK.Calendar.Button._activeElement,"mousedown");if(JAK.Calendar.Button._activeElement==this.td){this.method.call(this.calendar,e,elm);}JAK.Calendar.Button._activeElement=false;}};JAK.Calendar.Day=JAK.ClassMaker.makeClass({"NAME":"JAK.Calendar.Day","VERSION":"2.0","IMPLEMENT":JAK.Calendar.Button});JAK.Calendar.Day.prototype.$constructor=function(calendar){this.td=JAK.cel("td","cal-day");this.calendar=calendar;this.date=false;this.calendar.ec.push(JAK.Events.addListener(this.td,"mouseup",this,"_up"));this.calendar.ec.push(JAK.Events.addListener(this.td,"mouseover",this,"_changeStatus"));this.calendar.ec.push(JAK.Events.addListener(this.td,"mouseout",this,"_changeStatus"));this.addOverEvents(this.td);this.addDownEvents(this.td);};JAK.Calendar.Day.prototype.redraw=function(today){this.td.innerHTML=this.date.getDate();JAK.DOM.removeClass(this.td,"cal-today");JAK.DOM.removeClass(this.td,"cal-selected");JAK.DOM.removeClass(this.td,"cal-obsolete");if(this.calendar.equalDates(this.date,today)){JAK.DOM.addClass(this.td,"cal-today");}if(this.calendar.equalDates(this.date,this.calendar.selectedDate)){JAK.DOM.addClass(this.td,"cal-selected");}if(this.date.getMonth()!=this.calendar.currentDate.getMonth()){JAK.DOM.addClass(this.td,"cal-obsolete");}};JAK.Calendar.Day.prototype._up=function(){if(JAK.Calendar.Button._activeElement){JAK.DOM.removeClass(JAK.Calendar.Button._activeElement,"mousedown");if(JAK.Calendar.Button._activeElement==this.td){if(this.calendar.callback){this.calendar.useDate(this.date);}this.calendar.makeEvent("datepick");this.calendar._hide();}JAK.Calendar.Button._activeElement=false;}};JAK.Calendar.Day.prototype._changeStatus=function(){if(this.oldStatus){this.calendar._dom.status.innerHTML=this.oldStatus;this.oldStatus=false;}else{this.oldStatus=this.calendar._dom.status.innerHTML;var str=this.calendar.options.dayNames[(this.date.getDay()+6)%7]+", ";str+=this.date.getDate()+". ";str+=this.calendar.options.monthNames[this.date.getMonth()]+" ";str+=this.date.getFullYear();this.calendar._dom.status.innerHTML=str;}};JAK.Calendar.Roller=JAK.ClassMaker.makeClass({"NAME":"JAK.Calendar.Roller","VERSION":"2.0"});JAK.Calendar.Roller.prototype.$constructor=function(calendar,parent,type,rightAlign){this.calendar=calendar;this.parent=parent;this.type=type;this.rightAlign=rightAlign;this.buttons=[];this.div=JAK.cel("div","cal-roller");this._hide();this.calendar._dom.content.appendChild(this.div);for(var i=0;i<12;i++){var btn=new JAK.Calendar.RollerButton(this,this.calendar);this.buttons.push(btn);this.div.appendChild(btn.div);}this._show();this._show=this._show.bind(this);this.calendar.ec.push(JAK.Events.addListener(this.parent,"mousedown",this,"_handleDown"));};JAK.Calendar.Roller.prototype._handleDown=function(){this.calendar._timer=true;setTimeout(this._show,this.calendar.options.rollerDelay);};JAK.Calendar.Roller.prototype._show=function(){if(!this.calendar._timer){return;}var pos1=JAK.DOM.getBoxPosition(this.parent);var pos2=JAK.DOM.getBoxPosition(this.calendar._dom.content);this.div.style.display="block";var w=this.div.offsetWidth;for(var i=0;i<12;i++){var btn=this.buttons[i].div;if(JAK.Browser.client=="ie"){btn.style.width=w+"px";}switch(this.type){case -1:case 1:var y=this.calendar.currentDate.getFullYear();btn.innerHTML=y+this.type*(i*2+1);break;case 0:this.buttons[i].value=i;JAK.DOM.removeClass(btn,"selected");btn.innerHTML=this.calendar.options.monthNamesShort[i];if(i==this.calendar.currentDate.getMonth()){JAK.DOM.addClass(btn,"selected");}break;}}var l=pos1.left-pos2.left;if(this.rightAlign){l+=this.parent.offsetWidth-this.div.offsetWidth;};this.div.style.left=l+"px";this.div.style.top=(pos1.top-pos2.top+this.parent.offsetHeight)+"px";};JAK.Calendar.Roller.prototype._hide=function(){this.div.style.display="none";};JAK.Calendar.RollerButton=JAK.ClassMaker.makeClass({"NAME":"JAK.Calendar.RollerButton","VERSION":"2.0","IMPLEMENT":JAK.Calendar.Button});JAK.Calendar.RollerButton.prototype.$constructor=function(roller,calendar){this.roller=roller;this.calendar=calendar;this.div=JAK.cel("div","label");this.addOverEvents(this.div);this.calendar.ec.push(JAK.Events.addListener(this.div,"mouseup",this,"_up",false,true));};JAK.Calendar.RollerButton.prototype._over=function(e,elm){this.calendar._removeRanges();if(!JAK.DOM.hasClass(elm,"selected")){JAK.DOM.addClass(elm,"mouseover");}};JAK.Calendar.RollerButton.prototype._out=function(e,elm){JAK.DOM.removeClass(elm,"mouseover");};JAK.Calendar.RollerButton.prototype._up=function(e,elm){var cal=this.calendar;switch(this.roller.type){case -1:case 1:cal.currentDate.setFullYear(this.div.innerHTML);cal._switchTo();break;case 0:cal.currentDate.setMonth(this.value);cal._switchTo();break;}};JAK.Calendar.Setup=JAK.ClassMaker.makeStatic({"NAME":"JAK.Calendar.Setup","VERSION":"1.0"});JAK.Calendar.Setup.manage=function(calendar,clickElm,targetElm){var callback=function(){for(var i=0;i<targetElm.length;i++){JAK.gel(targetElm[i]).value=arguments[i]?arguments[i]:"";}};var click=function(e,elm){var pos=JAK.DOM.getBoxPosition(clickElm);var x=pos.left;var y=pos.top+clickElm.offsetHeight+1;var dateString="";if(targetElm.length==2){dateString+=JAK.gel(targetElm[0]).value+" "+JAK.gel(targetElm[1]).value;}else{if(targetElm.length==3){dateString+=JAK.gel(targetElm[0]).value+" "+JAK.gel(targetElm[1]).value+":"+JAK.gel(targetElm[2]).value;}else{dateString+=JAK.gel(targetElm[0]).value;}}calendar.pick(x,y,dateString,callback);};calendar.ec.push(JAK.Events.addListener(clickElm,"click",window,click,false,true));};JAK.Calendar.Setup.createButton=function(inputs,label,imageUrl){if(!inputs instanceof Array){inputs=[inputs];}click=JAK.Calendar._createButton(imageUrl,label);var lastInput=JAK.gel(inputs[inputs.length-1]);lastInput.parentNode.insertBefore(click,lastInput.nextSibling);return click;};JAK.Calendar.Setup.setup=function(imageUrl,label,optObj,inputs){var cal=new JAK.Calendar(optObj);var click=JAK.Calendar.Setup.createButton(inputs,label,imageUrl);JAK.Calendar.Setup.manage(cal,click,inputs);};JAK.Tabs=JAK.ClassMaker.makeClass({"NAME":"Tabs","VERSION":"2.0","IMPLEMENT":JAK.ISignals});JAK.Tabs.prototype.$constructor=function(container,optObj,callbackObject,callbackMethod){this.options={"defaultClass":"tab","selectedClass":"tab-selected","hoverClass":"tab-hover","hover":false};for(var p in optObj){this.options[p]=optObj[p];}this.selectedIndex=-1;this.container=JAK.gel(container);this.callbackObject=callbackObject;this.callbackMethod=callbackMethod;this.tabs=[];this.ec=[];};JAK.Tabs.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}for(var i=0;i<this.tabs.length;i++){this.tabs[i].$destructor();}for(var p in this){this[p]=null;}};JAK.Tabs.prototype.clear=function(){this.selectedIndex=-1;for(var i=0;i<this.tabs.length;i++){this.tabs[i].$destructor();}this.tabs=[];};JAK.Tabs.prototype.getActiveTab=function(){if(this.tabs[this.selectedIndex]){return this.tabs[this.selectedIndex];}else{return null;}};JAK.Tabs.prototype.addTab=function(click,content){if(arguments.length==1){this._addTab(click);}else{this._crateNewTab(click,content);}};JAK.Tabs.prototype._crateNewTab=function(click,content){var tab=new JAK.Tab(click,content,this,this.options.hover,this.options.hoverClass);this._addTab(tab);};JAK.Tabs.prototype._addTab=function(tab){this.tabs.push(tab);tab._deactivate();};JAK.Tabs.prototype.go=function(index){if(index==this.selectedIndex){return;}var oldI=this.selectedIndex;if(this.selectedIndex!=-1){this.tabs[this.selectedIndex]._deactivate();}this.selectedIndex=index;this.tabs[this.selectedIndex]._activate();this.makeEvent("tabchange");if(this.callbackObject){this.callbackObject[this.callbackMethod](oldI,this.selectedIndex);}};JAK.Tabs.prototype.addManyTabs=function(clickList,contentList,defaultIndex){var clicks=JAK.gel(clickList);var contents=JAK.gel(contentList);var clicks_=[];var contents_=[];for(var i=0;i<clicks.childNodes.length;i++){var item=clicks.childNodes[i];if(item.nodeType==1){clicks_.push(item);}}for(var i=0;i<contents.childNodes.length;i++){var item=contents.childNodes[i];if(item.nodeType==1){contents_.push(item);}}var cnt=Math.min(clicks_.length,contents_.length);for(var i=0;i<cnt;i++){this.addTab(clicks_[i],contents_[i]);}if(defaultIndex!=-1){this.go(defaultIndex);}};JAK.Tab=JAK.ClassMaker.makeClass({"NAME":"Tab","VERSION":"1.0","CLASS":"class"});JAK.Tab.prototype.$constructor=function(click,content,owner,hover,hoverClass){this.content=JAK.gel(content);this.owner=owner;this.click=JAK.gel(click);this.hoverClass=hoverClass;this.ec=[];this.ec.push(JAK.Events.addListener(this.click,"click",this,"_go",false,true));if(hover){this.ec.push(JAK.Events.addListener(this.click,"mouseover",this,"_hover"));this.ec.push(JAK.Events.addListener(this.click,"mouseout",this,"_hoverOut"));}if(this.owner.options.defaultClass){JAK.DOM.addClass(this.click,this.owner.options.defaultClass);}};JAK.Tab.prototype.$destructor=function(){if(this.content.parentNode){this.content.parentNode.removeChild(this.content);}if(this.click.parentNode){this.click.parentNode.removeChild(this.click);}for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}for(var p in this){this[p]=null;}};JAK.Tab.prototype._go=function(e,elm){JAK.Events.cancelDef(e);var index=-1;for(var i=0;i<this.owner.tabs.length;i++){if(this.owner.tabs[i]==this){index=i;}}if(index==-1){return;}this.owner.go(index);};JAK.Tab.prototype._activate=function(){if(!this.content.parentNode||this.content.parentNode!=this.owner.container){this.owner.container.appendChild(this.content);}this.content.style.display="";if(this.owner.options.selectedClass){JAK.DOM.addClass(this.click,this.owner.options.selectedClass);}};JAK.Tab.prototype._deactivate=function(){var c=this.content.style.display="none";if(this.owner.options.selectedClass){JAK.DOM.removeClass(this.click,this.owner.options.selectedClass);}};JAK.Tab.prototype._hover=function(e,elm){JAK.DOM.addClass(elm,this.hoverClass);};JAK.Tab.prototype._hoverOut=function(e,elm){JAK.DOM.removeClass(elm,this.hoverClass);};JAK.LightBox=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox","VERSION":"2.0","IMPLEMENT":[JAK.ISignals,JAK.IComponents]});JAK.LightBox.DIR_PREV=-1;JAK.LightBox.DIR_NEXT=1;JAK.LightBox.container=null;JAK.LightBox.prototype.$constructor=function(data,optObj){this.options={"components":{"anchorage":JAK.LightBox.Anchorage,"main":JAK.LightBox.Main,"strip":JAK.LightBox.Strip,"description":JAK.LightBox.Description,"pageShader":JAK.LightBox.PageShader,"navigation":JAK.LightBox.Navigation,"transition":JAK.LightBox.Transition,"others":[]},"imagePath":"img/","imageFormat":"png","parent":false,"zIndex":false,"useShadow":false,"usePageShader":true,"shadowSizes":[16,16,16,16],"galleryId":false,"galleryClassName":"image-browser-content","galleryName":false,"handleDocumentCloseClick":true,"mainOpt":{"id":false,"className":"image-browser-image","useMouseWheelScroll":true},"stripOpt":{"id":false,"className":"image-browser-thumbs","orientation":"vertical","activeBorder":"inner","activeId":false,"activeClassName":"image-browser-active","imageBoxClassName":"image-browser-thumb-box"},"descriptionOpt":{"id":false,"className":"image-browser-caption","contentId":false,"contentClassName":"image-browser-caption-content"},"navigationOpt":{"id":false,"className":"image-browser-navigation","continuous":true,"showDisabled":false,"nextClassName":"image-browser-next","prevClassName":"image-browser-prev","closeClassName":"image-browser-close"},"transitionOpt":{},"anchorageOpt":{}};for(var p in optObj){if(optObj[p] instanceof Object&&!optObj[p].CLASS){for(var o in optObj[p]){this.options[p][o]=optObj[p][o];}}else{this.options[p]=optObj[p];}}this.dom={};this.ec=[];this.objCache=[];this.components=[];this.visible=false;this.index=0;this.direction=JAK.LightBox.DIR_NEXT;this.blindLinkName=JAK.idGenerator();this.blindLinkGlobalName="LightBoxLastBlindAnchor";this.blindStyle={"position":"absolute","top":"-1000px","left":"-1000px","width":"1px","height":"1px","overflow":"hidden"};this.data=[];for(var i=0;i<data.length;i++){var item=data[i];var o={};for(var j in item){o[j]=item[j];}if(item.main){this.index=i;}this.data.push(o);}this._buildContainer();this._renderBlindStart();this._render();for(var i=0;i<this.options.components.others.length;i++){this.addNewComponent(this.options.components.others[i]);}this.addNewComponent({"name":"dummyTransition","part":JAK.LightBox.Transition});this._renderBlindEnd();};JAK.LightBox.create=function(elm,optObj){elm=JAK.gel(elm);var data=[];var l=[];var links=elm.getElementsByTagName("a");for(var i=0;i<links.length;i++){var img=links[i].getElementsByTagName("img")[0];if(!img){continue;}data.push({"alt":img.alt,"small":{"url":img.src},"big":{"url":links[i].href}});l.push(links[i]);}var g=new JAK.LightBox(data,optObj);for(var i=0;i<l.length;i++){g.bindElement(l[i],i);}return g;};JAK.LightBox.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}this.callChildDestructor();for(var p in this){this[p]=null;}};JAK.LightBox.prototype._addDefaultComponent=function(name,part,className){var node=part;var ok=false;while(node){if(node==className){ok=true;break;}node=node.EXTEND;}if(ok){this.addNewComponent({"part":part,"name":name});}else{alert("Bad "+name+" functionality");}};JAK.LightBox.prototype._buildContainer=function(){if(JAK.LightBox.container==null){JAK.LightBox.container=JAK.cel("div");JAK.LightBox.container.style.position="absolute";JAK.LightBox.container.style.top="-100px";JAK.LightBox.container.style.left="-100px";JAK.LightBox.container.style.overflow="hidden";JAK.LightBox.container.style.width="1px";JAK.LightBox.container.style.height="1px";var body=document.getElementsByTagName("body")[0];body.insertBefore(JAK.LightBox.container,body.firstChild);}this.dom.loadBox=JAK.cel("div");this.dom.loadBox.style.position="absolute";JAK.LightBox.container.appendChild(this.dom.loadBox);var div=JAK.cel("div",this.options.galleryClassName,this.options.galleryId);if(this.options.useShadow){var winopts={"imagePath":this.options.imagePath,"imageFormat":this.options.imageFormat,"sizes":this.options.shadowSizes};this.window=new JAK.Window(winopts);this.dom.container=this.window.container;this.dom.container.style.position="absolute";this.window.content.appendChild(div);this.dom.content=div;}else{this.dom.container=JAK.mel("div",null,{"position":"absolute"});this.dom.container.appendChild(div);this.dom.content=div;}if(this.options.zIndex){this.dom.container.style.zIndex=this.options.zIndex;}if(!this.parent){var parent=this.dom.loadBox;}else{var parent=this.parent;}parent.insertBefore(this.dom.container,parent.firstChild);};JAK.LightBox.prototype._render=function(){this._addDefaultComponent("anchorage",this.options.components.anchorage,JAK.LightBox.Anchorage);this._addDefaultComponent("transition",this.options.components.transition,JAK.LightBox.Transition);this._addDefaultComponent("main",this.options.components.main,JAK.LightBox.Main);this.dom.content.appendChild(this.main.render());if(this.options.usePageShader){this._addDefaultComponent("pageShader",this.options.components.pageShader,JAK.LightBox.PageShader);}this._addDefaultComponent("strip",this.options.components.strip,JAK.LightBox.Strip);this.dom.content.appendChild(this.strip.render());this._addDefaultComponent("description",this.options.components.description,JAK.LightBox.Description);this.dom.content.appendChild(this.description.render());this._addDefaultComponent("navigation",this.options.components.navigation,JAK.LightBox.Navigation);this.dom.content.appendChild(this.navigation.render());this.makeEvent("renderDone");};JAK.LightBox.prototype._renderBlindStart=function(){var h3=JAK.cel("h3");h3.innerHTML="Fotogalerie"+(this.options.galleryName?" "+this.options.galleryName:"");JAK.DOM.setStyle(h3,this.blindStyle);var link=JAK.cel("a");link.href="#"+this.blindLinkName;link.innerHTML="PĹeskoÄit fotogalerii";JAK.DOM.setStyle(link,this.blindStyle);this.dom.content.appendChild(h3);this.dom.content.appendChild(link);};JAK.LightBox.prototype._renderBlindEnd=function(){var link=JAK.cel("a");link.id=this.blindLinkName;this.dom.content.appendChild(link);var elm=JAK.gel(this.blindLinkGlobalName);if(elm){elm.parentNode.removeChild(elm);}var linkAll=JAK.cel("a");linkAll.id=this.blindLinkGlobalName;};JAK.LightBox.prototype._addEvents=function(){if(this.options.handleDocumentCloseClick){this.ec.push(JAK.Events.addListener(document,"mousedown",this,"_clickClose"));this.ec.push(JAK.Events.addListener(this.dom.container,"mousedown",window,JAK.Events.stopEvent));}this.ec.push(JAK.Events.addListener(window,"resize",this,"_resize"));};JAK.LightBox.prototype._removeEvents=function(){for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}this.ec=[];};JAK.LightBox.prototype.createEvent=function(sender,name){this.makeEvent(name,{"sender":sender});};JAK.LightBox.prototype._resize=function(e,elm){this.makeEvent("windowResize");};JAK.LightBox.prototype._clickClose=function(e,elm){if(e.button==JAK.Browser.mouse.left){this.close();}};JAK.LightBox.prototype.close=function(){this.makeEvent("close");this._removeEvents();this.visible=false;if(!this.parent){JAK.DOM.elementsHider(this.dom.container,false,"show");this.dom.container.parentNode.removeChild(this.dom.container);}this.makeEvent("closed");};JAK.LightBox.prototype.show=function(i){this.makeEvent("show",{"index":i});this._addEvents();this.visible=true;if(!this.parent){var body=document.getElementsByTagName("body")[0];body.insertBefore(this.dom.container,body.firstChild);this.anchorage.actualizePosition();JAK.DOM.elementsHider(this.dom.container,false,"hide");}this.go(i);this.makeEvent("showed",{"index":i});};JAK.LightBox.prototype.go=function(index){var dir=index<this.index?JAK.LightBox.DIR_PREV:JAK.LightBox.DIR_NEXT;this._go(index,dir);};JAK.LightBox.prototype._go=function(i,direction){this.direction=direction;this.makeEvent("go",{"index":i});this.main.update(i);this.strip.update(i);this.description.update(i);this.navigation.update(i);this.index=i;};JAK.LightBox.prototype.previous=function(){var i=this.index-1;if(i<0){if(this.options.navigationOpt.continuous){i=this.data.length-1;}else{return;}}this._go(i,JAK.LightBox.DIR_PREV);};JAK.LightBox.prototype.next=function(){var i=this.index+1;if(i==this.data.length){if(this.options.navigationOpt.continuous){i=0;}else{return;}}this._go(i,JAK.LightBox.DIR_NEXT);};JAK.LightBox.prototype.bindAnchors=function(elm){var links=JAK.DOM.arrayFromCollection(JAK.gel(elm).getElementsByTagName("a"));for(var i=0;i<links.length;i++){this.bindElement(links[i],i);}};JAK.LightBox.prototype.bindElement=function(elm,i){this.objCache.push(new JAK.LightBox.ImageLink(this,i,elm));};JAK.LightBox.ImageLink=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.ImageLink","VERSION":"1.0","CLASS":"class"});JAK.LightBox.ImageLink.prototype.$constructor=function(owner,index,elm){this.ec=[];this.owner=owner;this.index=index;this.elm=elm;this.ec.push(JAK.Events.addListener(this.elm,"click",this,"_show"));};JAK.LightBox.ImageLink.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}for(var p in this){this[p]=null;}};JAK.LightBox.ImageLink.prototype._show=function(e,elm){JAK.Events.cancelDef(e);JAK.Events.stopEvent(e);this.owner.show(this.index);};JAK.LightBox.Anchorage=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Anchorage","VERSION":"1.0","CLASS":"class"});JAK.LightBox.Anchorage.prototype.$constructor=function(owner){this.owner=owner;this.options=this.owner.options.anchorageOpt;this.container=this.owner.dom.container;};JAK.LightBox.Anchorage.prototype.actualizePosition=function(){this.container.style.top="0px";this.container.style.left="0px";this.container.style.position="absolute";};JAK.LightBox.Anchorage.Fixed=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Anchorage.Fixed","VERSION":"1.0","CLASS":"class","EXTEND":JAK.LightBox.Anchorage});JAK.LightBox.Anchorage.Fixed.prototype.$constructor=function(owner){this.$super(owner);this.ec=[];this.useAbsoluteHack=false;if(JAK.Browser.client=="ie"&&JAK.Browser.version<=6){this.useAbsoluteHack=true;}this.attachEvents();};JAK.LightBox.Anchorage.Fixed.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}for(var p in this){this[p]=null;}};JAK.LightBox.Anchorage.Fixed.prototype.attachEvents=function(){this.ec.push(JAK.Events.addListener(window,"resize",this,"actualizePosition"));if(this.useAbsoluteHack){this.ec.push(JAK.Events.addListener(window,"scroll",this,"actualizePosition"));}};JAK.LightBox.Anchorage.Fixed.prototype.actualizePosition=function(){if(this.owner.visible){this._position();}};JAK.LightBox.Anchorage.Fixed.prototype._position=function(){var portSize=JAK.DOM.getDocSize();if(this.useAbsoluteHack){var wScroll=JAK.DOM.getScrollPos();this.container.style.position="absolute";this.container.style.top=Math.round(wScroll.y+portSize.height/2-this.container.offsetHeight/2)+"px";this.container.style.left=Math.round(wScroll.x+portSize.width/2-this.container.offsetWidth/2)+"px";}else{this.container.style.position="fixed";this.container.style.top=Math.round(portSize.height/2-this.container.offsetHeight/2)+"px";this.container.style.left=Math.round(portSize.width/2-this.container.offsetWidth/2)+"px";}};JAK.LightBox.Anchorage.TopLeft=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Anchorage.TopLeft","VERSION":"1.0","CLASS":"class","EXTEND":JAK.LightBox.Anchorage});JAK.LightBox.Anchorage.TopLeft.prototype.actualizePosition=function(){this.container.style.top=this.options.top+"px";this.container.style.left=this.options.left+"px";this.container.style.position="absolute";};JAK.LightBox.Main=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Main","VERSION":"1.0","CLASS":"class","IMPLEMENT":[JAK.ISignals]});JAK.LightBox.Main.prototype.$constructor=function(owner){this.owner=owner;this.options=this.owner.options.mainOpt;this.dom={};this.ec=[];this.current=null;this.width=0;this.height=0;};JAK.LightBox.Main.prototype.$destructor=function(){for(p in this.dom){this.dom[p]=null;}for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}for(p in this){this[p]=null;}};JAK.LightBox.Main.prototype.render=function(){this.dom.mainBox=JAK.cel("div",this.options.className,this.options.id);this._attachEvents();return this.dom.mainBox;};JAK.LightBox.Main.prototype._attachEvents=function(){if(this.options.useMouseWheelScroll){this.ec.push(JAK.Events.addListener(this.dom.mainBox,"DOMMouseScroll",this,"_scroll"));this.ec.push(JAK.Events.addListener(this.dom.mainBox,"mousewheel",this,"_scroll"));}};JAK.LightBox.Main.prototype._scroll=function(e,elm){JAK.Events.cancelDef(e);var delta=e.wheelDelta||e.detail;if(JAK.Browser.client=="gecko"){delta=-delta;}if(delta>0){this.owner.previous();}else{this.owner.next();}};JAK.LightBox.Main.prototype.update=function(i){this.width=parseInt(this.dom.mainBox.clientWidth);this.height=parseInt(this.dom.mainBox.clientHeight);var imgObj=this.owner.data[i];if(imgObj.flash){this._generateFlashElm(imgObj);}else{this._generateImgElm(imgObj);}};JAK.LightBox.Main.prototype._generateFlashElm=function(img){var em=JAK.cel("embed");em.setAttribute("quality","high");em.setAttribute("pluginspage","http://www.macromedia.com/go/getflashplayer");em.setAttribute("type","application/x-shockwave-flash");em.setAttribute("width",img.width?img.width:this.width);em.setAttribute("height",img.height?img.height:this.height);em.setAttribute("allowfullscreen","true");em.setAttribute("src",img.big.url);em.setAttribute("flashvars",img.flash);em.style.visibility="hidden";this.dom.mainBox.appendChild(em);this._switchImages(em);};JAK.LightBox.Main.prototype._generateImgElm=function(img){var em=JAK.cel("img");em.style.visibility="hidden";em.src=img.big.url;this.dom.mainBox.appendChild(em);this._switchImages(em);};JAK.LightBox.Main.prototype._switchImages=function(newImg){var c=this.current;this.current=newImg;var cName=(c?c.nodeName.toLowerCase():false);var newImgName=(newImg?newImg.nodeName.toLowerCase():false);if(cName=="embed"||newImgName=="embed"){this.owner.dummyTransition.start(c,newImg);}else{this.owner.transition.start(c,newImg);}};JAK.LightBox.Main.Scaled=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Main.Scaled","VERSION":"1.0","CLASS":"class","EXTEND":JAK.LightBox.Main});JAK.LightBox.Main.Scaled.prototype._generateImgElm=function(img){var em=JAK.cel("img");em.height=this.height;em.width=this.width;em.style.visibility="hidden";em.style.position="absolute";em.src=img.big.url;this.dom.mainBox.appendChild(em);this._switchImages(em);};JAK.LightBox.Main.CenteredScaled=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Main.CenteredScaled","VERSION":"1.0","CLASS":"class","EXTEND":JAK.LightBox.Main});JAK.LightBox.Main.CenteredScaled.prototype.$constructor=function(owner){this.$super(owner);this.scaledImage=null;};JAK.LightBox.Main.CenteredScaled.prototype._generateImgElm=function(img){var em=new JAK.LightBox.ScaledImage(this,img.big.url,this.width,this.height,this.dom.mainBox);em.render();if(this.scaledImage){this.scaledImage.$destructor();this.scaledImage=null;}this.scaledImage=em;};JAK.LightBox.Main.CenteredScaled.prototype._generateFlashElm=function(img){this.$super(img);if(img.width||img.height){this.current.style.position="absolute";var w=img.width?img.width:this.width;var h=img.height?img.height:this.height;var pw=this.current.parentNode.clientWidth;var ph=this.current.parentNode.clientHeight;this.current.style.top=Math.round((ph-h)/2)+"px";this.current.style.left=Math.round((pw-w)/2)+"px";}};JAK.LightBox.Transition=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Transition","VERSION":"1.0","CLASS":"class"});JAK.LightBox.Transition.prototype.$constructor=function(owner){this.owner=owner;this.options=owner.options.transitionOpt;};JAK.LightBox.Transition.prototype.$destructor=function(){};JAK.LightBox.Transition.prototype.start=function(firstElm,secondElm){this.first=firstElm;this.second=secondElm;this._finish();};JAK.LightBox.Transition.prototype._finish=function(){this.second.style.visibility="visible";if(this.first){this.first.parentNode.removeChild(this.first);}this.first=null;this.second=null;this.owner.createEvent(this,"transitionDone");};JAK.LightBox.Transition.Fade=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Transition.Fade","VERSION":"1.0","CLASS":"class","EXTEND":JAK.LightBox.Transition});JAK.LightBox.Transition.Fade.prototype.$constructor=function(owner){this.options={"interval":400,"frequency":25,"overlap":1};this.owner=owner;for(var p in owner.options.transitionOpt){this.options[p]=owner.options.transitionOpt[p];}this.running1=false;this.running2=false;this._secondOpacity=0;this._step1=this._step1.bind(this);this._step2=this._step2.bind(this);this._finish=this._finish.bind(this);this.i1=new JAK.Interpolator(1,0,this.options.interval,this._step1,{"frequency":this.options.frequency});this.i2=new JAK.Interpolator(0,1,this.options.interval,this._step2,{"frequency":this.options.frequency,"endCallback":this._finish});};JAK.LightBox.Transition.Fade.prototype.start=function(oldElm,newElm){if(this.running1||this.running2){this.second.parentNode.removeChild(this.second);this.second=newElm;this._setOpacity(this.second,this._secondOpacity);this.second.style.visibility="visible";}else{this.first=oldElm;this.second=newElm;this._secondOpacity=0;this._setOpacity(this.second,0);this.second.style.visibility="visible";if(this.first){this.running1=true;this.i1.start();}else{this._start2();}}};JAK.LightBox.Transition.Fade.prototype._start2=function(){this.running2=true;this.i2.start();};JAK.LightBox.Transition.Fade.prototype._step1=function(value){if(!this.first){return;}this._setOpacity(this.first,value);if(!this.running2&&value<=this.options.overlap){this._start2();}};JAK.LightBox.Transition.Fade.prototype._step2=function(value){this._secondOpacity=value;this._setOpacity(this.second,value);};JAK.LightBox.Transition.Fade.prototype._finish=function(){this.running1=false;this.running2=false;this.$super();};JAK.LightBox.Transition.Fade.prototype._setOpacity=function(node,value){node.style.opacity=value;node.style.filter="alpha(opacity="+Math.round(value*100)+")";};JAK.LightBox.ScaledImage=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.ScaledImage","VERSION":"1.0","CLASS":"class"});JAK.LightBox.ScaledImage.prototype.$constructor=function(owner,src,w,h,rootElm){this.owner=owner;this.w=w;this.h=h;this.src=src;this.rootElm=rootElm;this.ec=[];this.dom={};};JAK.LightBox.ScaledImage.prototype.render=function(){this.dom.elm=JAK.cel("img");this.dom.container=JAK.mel("div",null,{"position":"absolute","left":"-1000px","top":"-1000px","width":"1px","height":"1px","overflow":"hidden"});this.ec.push(JAK.Events.addListener(this.dom.elm,"load",this,"_loaded",false,true));document.body.insertBefore(this.dom.container,document.body.firstChild);this.dom.container.appendChild(this.dom.elm);this.dom.elm.src=this.src;};JAK.LightBox.ScaledImage.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}for(var p in this.dom){this.dom[p]=null;}for(var p in this){this[p]=null;}};JAK.LightBox.ScaledImage.prototype._loaded=function(e,elm){var w=this.dom.elm.width||this.dom.elm.naturalWidth||0;var h=this.dom.elm.height||this.dom.elm.naturalHeight||0;var ratio_w=w/this.w;var ratio_h=h/this.h;var max=Math.max(ratio_w,ratio_h);if(max>1){w=w/max;h=h/max;if(w&&h){this.dom.elm.width=Math.ceil(w);this.dom.elm.height=Math.ceil(h);}}var pw=this.rootElm.clientWidth;var ph=this.rootElm.clientHeight;this.dom.elm.style.position="absolute";this.dom.elm.style.visibility="hidden";this.dom.elm.style.top=Math.round((ph-h)/2)+"px";this.dom.elm.style.left=Math.round((pw-w)/2)+"px";if(this.rootElm){this.rootElm.appendChild(this.dom.elm);}if(this.dom.container){this.dom.container.parentNode.removeChild(this.dom.container);this.dom.container=false;}this.owner.owner.createEvent(this,"mainImageLoaded");this.owner._switchImages(this.dom.elm);};JAK.LightBox.PageShader=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.PageShader","VERSION":"1.0","CLASS":"class","IMPLEMENT":[JAK.ISignals]});JAK.LightBox.PageShader.prototype.$constructor=function(owner){this.owner=owner;this.dom={};this.addListener("showed","_show",this.owner);this.addListener("close","_hide",this.owner);this.addListener("windowResize","_resize",this.owner);};JAK.LightBox.PageShader.prototype.$destructor=function(){for(p in this.dom){this.dom[p]=null;}for(p in this){this[p]=null;}};JAK.LightBox.PageShader.prototype._show=function(){this.dom.root=JAK.mel("div",{"className":"image-browser-root"},{"position":"absolute","left":"0px","top":"0px"});var docSize=JAK.DOM.getDocSize();var docH=document.compatMode=="BackCompat"?document.body.scrollHeight:document.body.offsetHeight;var docW=document.compatMode=="BackCompat"?document.body.scrollWidth:document.body.offsetWidth;this.dom.root.style.width=(docSize.width>docW?docSize.width:docW)+"px";this.dom.root.style.height=(docSize.height>docH?docSize.height:docH)+"px";if(this.owner.options.zIndex){this.dom.root.style.zIndex=this.owner.options.zIndex-1;}var parent=this.owner.dom.container.parentNode;var nextSibling=this.owner.dom.container.nextSibling;parent.insertBefore(this.dom.root,nextSibling);JAK.DOM.elementsHider(this.dom.root,false,"hide");};JAK.LightBox.PageShader.prototype._hide=function(){if(this.dom.root&&this.dom.root.parentNode){JAK.DOM.elementsHider(this.dom.root,false,"hide");this.dom.root.parentNode.removeChild(this.dom.root);}this.dom.root=null;};JAK.LightBox.PageShader.prototype._resize=function(){this._hide();this._show();};JAK.LightBox.Strip=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Strip","VERSION":"1.0","CLASS":"class"});JAK.LightBox.Strip.prototype.$constructor=function(owner){this.owner=owner;this.options=this.owner.options.stripOpt;this.dom={};};JAK.LightBox.Strip.prototype.$destructor=function(){for(p in this.dom){this.dom[p]=null;}for(p in this){this[p]=null;}};JAK.LightBox.Strip.prototype.render=function(){this.dom.mainBox=JAK.cel("div",this.options.className,this.options.id);return this.dom.mainBox;};JAK.LightBox.Strip.prototype.update=function(index){};JAK.LightBox.Strip.Scrollable=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Strip.Scrollable","VERSION":"1.0","CLASS":"class","EXTEND":JAK.LightBox.Strip});JAK.LightBox.Strip.Scrollable.prototype.$constructor=function(owner){this.$super(owner);this.objCache=[];this.ec=[];this.activeBorder={};};JAK.LightBox.Strip.Scrollable.prototype.$destructor=function(){for(var i=0;i<this.objCache.length;i++){this.objCache[i].$destructor();this.objCache[i]=null;}for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}this.ec=[];this.$super();};JAK.LightBox.Strip.Scrollable.prototype.render=function(){this.$super();this.owner.dom.content.appendChild(this.dom.mainBox);this.dom.mainBox.style.position="relative";this.dom.imageBox=JAK.cel("div");this.dom.mainBox.appendChild(this.dom.imageBox);this.dom.imageTable=JAK.cel("table");this.dom.imageTable.style.borderCollapse="collapse";var tbody=JAK.cel("tbody");this.dom.imageTable.appendChild(tbody);this.dom.imageBox.appendChild(this.dom.imageTable);for(var i=0;i<this.owner.data.length;i++){if(this.options.orientation=="vertical"){var tr=JAK.cel("tr");var td=JAK.cel("td");tr.appendChild(td);td.align="center";td.vAlign="middle";tbody.appendChild(tr);}else{if(i==0){var tr=JAK.cel("tr");}var td=JAK.cel("td");td.align="center";td.vAlign="middle";tr.appendChild(td);if(i==this.owner.data.length-1){tbody.appendChild(tr);}}var div=JAK.cel("div",this.options.imageBoxClassName);div.style.position="relative";td.style.padding="0px";td.appendChild(div);}var elms=JAK.DOM.arrayFromCollection(tbody.getElementsByTagName("div"));for(var i=0;i<this.owner.data.length;i++){var stripImg=new JAK.LightBox.StripImage(this.owner,this.options,this.owner.data[i],i);stripImg.render(elms[i]);this.objCache.push(stripImg);}this.dom.active=JAK.cel("div",this.options.activeClassName,this.options.activeId);this.dom.active.style.position="absolute";this.dom.mainBox.appendChild(this.dom.active);this.activeBorder.top=parseInt(JAK.DOM.getStyle(this.dom.active,"borderTopWidth"));this.activeBorder.bottom=parseInt(JAK.DOM.getStyle(this.dom.active,"borderBottomWidth"));this.activeBorder.left=parseInt(JAK.DOM.getStyle(this.dom.active,"borderLeftWidth"));this.activeBorder.right=parseInt(JAK.DOM.getStyle(this.dom.active,"borderRightWidth"));this.dom.mainBox.removeChild(this.dom.active);this._addEvents();return this.dom.mainBox;};JAK.LightBox.Strip.Scrollable.prototype._addEvents=function(){if(this.options.orientation=="horizontal"){this.ec.push(JAK.Events.addListener(this.dom.mainBox,"DOMMouseScroll",this,"_scroll"));this.ec.push(JAK.Events.addListener(this.dom.mainBox,"mousewheel",this,"_scroll"));}};JAK.LightBox.Strip.Scrollable.prototype._scroll=function(e,elm){JAK.Events.cancelDef(e);var delta=e.wheelDelta||e.detail;if(JAK.Browser.client=="gecko"){delta=-delta;}if(delta>0){this.dom.mainBox.scrollLeft-=30;}else{this.dom.mainBox.scrollLeft+=30;}};JAK.LightBox.Strip.Scrollable.prototype.update2=function(index){this.dom.active.style.position="absolute";var pos=JAK.DOM.getBoxPosition(this.objCache[index].dom.img.parentNode,this.dom.imageTable);var borderTop=parseInt(JAK.DOM.getStyle(this.dom.active,"borderTopWidth"));var borderBottom=parseInt(JAK.DOM.getStyle(this.dom.active,"borderBottomWidth"));var borderLeft=parseInt(JAK.DOM.getStyle(this.dom.active,"borderLeftWidth"));var borderRight=parseInt(JAK.DOM.getStyle(this.dom.active,"borderRightWidth"));if(this.options.activeBorder=="inner"){this.dom.active.style.top=pos.top+"px";this.dom.active.style.left=pos.left+"px";this.dom.active.style.width=(this.objCache[index].dom.img.parentNode.offsetWidth-(!isNaN(borderLeft)?borderLeft:0)-(!isNaN(borderRight)?borderRight:0))+"px";this.dom.active.style.height=(this.objCache[index].dom.img.parentNode.offsetHeight-(!isNaN(borderTop)?borderTop:0)-(!isNaN(borderBottom)?borderBottom:0))+"px";}else{this.dom.active.style.top=(pos.top-(!isNaN(borderLeft)?borderLeft:0))+"px";this.dom.active.style.left=(pos.left-(!isNaN(borderTop)?borderTop:0))+"px";this.dom.active.style.width=(this.objCache[index].dom.img.parentNode.offsetWidth)+"px";this.dom.active.style.height=(this.objCache[index].dom.img.parentNode.offsetHeight)+"px";}if(this.options.orientation=="vertical"){var a=JAK.DOM.getBoxPosition(this.objCache[index].dom.img.parentNode,this.dom.mainBox);var b=parseInt(JAK.DOM.getStyle(this.dom.mainBox,"height"))/2;var c=parseInt(JAK.DOM.getStyle(this.objCache[index].dom.img.parentNode,"height"))/2;var scroll=a.top-b+c;this.dom.mainBox.scrollTop=Math.round(scroll);}else{var a=JAK.DOM.getBoxPosition(this.objCache[index].dom.img.parentNode,this.dom.mainBox);var b=parseInt(JAK.DOM.getStyle(this.dom.mainBox,"width"))/2;var c=parseInt(JAK.DOM.getStyle(this.objCache[index].dom.img.parentNode,"width"))/2;var scroll=a.left-b+c;this.dom.mainBox.scrollLeft=Math.round(scroll);}};JAK.LightBox.Strip.Scrollable.prototype.update=function(index){if(this.options.activeBorder=="inner"){this.dom.active.style.left="0px";this.dom.active.style.top="0px";this.dom.active.style.width=(this.objCache[index].dom.img.parentNode.offsetWidth-(!isNaN(this.activeBorder.left)?this.activeBorder.left:0)-(!isNaN(this.activeBorder.right)?this.activeBorder.right:0))+"px";this.dom.active.style.height=(this.objCache[index].dom.img.parentNode.offsetHeight-(!isNaN(this.activeBorder.top)?this.activeBorder.top:0)-(!isNaN(this.activeBorder.bottom)?this.activeBorder.bottom:0))+"px";}else{this.dom.active.style.left=-(!isNaN(this.activeBorder.left)?this.activeBorder.left:0)+"px";this.dom.active.style.top=-(!isNaN(this.activeBorder.top)?this.activeBorder.top:0)+"px";this.dom.active.style.width=(this.objCache[index].dom.img.parentNode.clientWidth)+"px";this.dom.active.style.height=(this.objCache[index].dom.img.parentNode.clientHeight)+"px";}this.objCache[index].dom.img.parentNode.appendChild(this.dom.active);if(this.options.orientation=="vertical"){var a=JAK.DOM.getBoxPosition(this.objCache[index].dom.img.parentNode,this.dom.mainBox);var b=parseInt(JAK.DOM.getStyle(this.dom.mainBox,"height"))/2;var c=parseInt(JAK.DOM.getStyle(this.objCache[index].dom.img.parentNode,"height"))/2;var scroll=a.top-b+c;this.dom.mainBox.scrollTop=Math.round(scroll);}else{var a=JAK.DOM.getBoxPosition(this.objCache[index].dom.img.parentNode,this.dom.mainBox);var b=parseInt(JAK.DOM.getStyle(this.dom.mainBox,"width"))/2;var c=parseInt(JAK.DOM.getStyle(this.objCache[index].dom.img.parentNode,"width"))/2;var scroll=a.left-b+c;this.dom.mainBox.scrollLeft=Math.round(scroll);}};JAK.LightBox.StripImage=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.StripImage","VERSION":"1.0","CLASS":"class"});JAK.LightBox.StripImage.prototype.$constructor=function(mainOwner,options,data,order){this.mainOwner=mainOwner;this.data=data;this.options=options;this.order=order;this.dom={};this.ec=[];};JAK.LightBox.StripImage.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}this.ec=[];};JAK.LightBox.StripImage.prototype.render=function(elm){this.dom.parentNode=elm;this.dom.tmpBox=JAK.mel("div",null,{"position":"absolute","top":"-100px","left":"-100px","width":"1px","height":"1px","overflow":"hidden"});var body=document.getElementsByTagName("body")[0];body.insertBefore(this.dom.tmpBox,body.firstChild);this.dom.img=JAK.cel("img");this.dom.tmpBox.appendChild(this.dom.img);this.ec.push(JAK.Events.addListener(this.dom.img,"load",this,"_loaded"));this.dom.img.src=this.data.small.url;this.dom.img.alt=this.data.alt;this.ec.push(JAK.Events.addListener(elm,"click",this,"_click"));};JAK.LightBox.StripImage.prototype._click=function(e,elm){this.mainOwner.go(this.order);};JAK.LightBox.StripImage.prototype._loaded=function(e,elm){var w=elm.width;var h=elm.height;this.dom.img.style.display="none";this.dom.parentNode.appendChild(this.dom.img);this.dom.tmpBox.parentNode.removeChild(this.dom.tmpBox);this.dom.tmpBox=null;var boxW=parseInt(this.dom.img.parentNode.clientWidth);var boxH=parseInt(this.dom.img.parentNode.clientHeight);var ratio_w=w/boxW;var ratio_h=h/boxH;var max=Math.max(ratio_w,ratio_h);if(max>1){w=Math.floor(w/max);h=Math.floor(h/max);if(w&&h){this.dom.img.width=w;this.dom.img.height=h;}}var ph=this.dom.parentNode.clientHeight;this.dom.img.style.marginTop=Math.round((ph-h)/2)+"px";this.dom.img.parentNode.textAlign="center";this.dom.img.style.display="";};JAK.LightBox.Description=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Description","VERSION":"1.0","CLASS":"class"});JAK.LightBox.Description.prototype.$constructor=function(owner){this.owner=owner;this.options=owner.options.descriptionOpt;this.dom={};};JAK.LightBox.Description.prototype.$destructor=function(){for(var p in this.dom){this.dom[p]=null;}for(var p in this){this[p]=null;}};JAK.LightBox.Description.prototype.render=function(){this.dom.box=JAK.cel("div",this.options.className,this.options.id);return this.dom.box;};JAK.LightBox.Description.prototype.update=function(index){};JAK.LightBox.Description.Basic=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Description.Basic","VERSION":"1.0","CLASS":"class","EXTEND":JAK.LightBox.Description});JAK.LightBox.Description.Basic.prototype.render=function(){this.$super();this.dom.content=JAK.cel("div",this.options.contentClassName,this.options.contentId);this.dom.box.appendChild(this.dom.content);return this.dom.box;};JAK.LightBox.Description.Basic.prototype.update=function(index){if(this.owner.data[index].description){this.dom.content.innerHTML=this.owner.data[index].description;}else{this.dom.content.innerHTML="";}};JAK.LightBox.Navigation=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Navigation","VERSION":"1.0","CLASS":"class"});JAK.LightBox.Navigation.prototype.$constructor=function(owner){this.owner=owner;this.options=owner.options.navigationOpt;this.dom={};this.ec=[];};JAK.LightBox.Navigation.prototype.$destructor=function(){for(var p in this.dom){this.dom[p]=null;}for(var i=0;i<this.ec.length;i++){JAK.Events.removeListener(this.ec[i]);}for(var p in this){this[p]=null;}};JAK.LightBox.Navigation.prototype.render=function(){return JAK.cel("div",this.options.className,this.options.id);};JAK.LightBox.Navigation.prototype.update=function(index){};JAK.LightBox.Navigation.Basic=JAK.ClassMaker.makeClass({"NAME":"JAK.LightBox.Navigation.Basic","VERSION":"1.0","CLASS":"class","EXTEND":JAK.LightBox.Navigation});JAK.LightBox.Navigation.Basic.prototype.render=function(){this.dom.next=JAK.cel("a",this.options.nextClassName,this.options.nextId);this.dom.prev=JAK.cel("a",this.options.prevClassName,this.options.prevId);this.dom.nextDisabled=JAK.cel("a",this.options.nextClassName+"-disabled",this.options.nextId?this.options.nextId+"-disabled":false);this.dom.prevDisabled=JAK.cel("a",this.options.prevClassName+"-disabled",this.options.prevId?this.options.prevId+"-disabled":false);this.dom.close=JAK.cel("a",this.options.closeClassName,this.options.closeId);this.dom.next.href="#";this.dom.prev.href="#";this.dom.nextDisabled.href="#";this.dom.prevDisabled.href="#";this.dom.close.href="#";this.dom.nextPreload=JAK.mel("div",{"id":this.options.nextId?this.options.nextId+"-preload":false,"className":this.options.nextClassName+"-preload"},{"position":"absolute","visibility":"hidden","height":"1px","width":"1px"});this.dom.nextDisabledPreload=JAK.mel("div",{"id":this.options.nextId?this.options.nextId+"-disabled-preload":false,"className":this.options.nextClassName+"-disabled-preload"},{"position":"absolute","visibility":"hidden","height":"1px","width":"1px"});this.dom.prevPreload=JAK.mel("div",{"id":this.options.prevId?this.options.prevId+"-preload":false,"className":this.options.prevClassName+"-preload"},{"position":"absolute","visibility":"hidden","height":"1px","width":"1px"});this.dom.prevDisabledPreload=JAK.mel("div",{"id":this.options.prevId?this.options.prevId+"-disabled-preload":false,"className":this.options.prevClassName+"-disabled-preload"},{"position":"absolute","visibility":"hidden","height":"1px","width":"1px"});this.dom.closePreload=JAK.mel("div",{"id":this.options.closeId?this.options.closeId+"-preload":false,"className":this.options.closeClassName+"-preload"},{"position":"absolute","visibility":"hidden","height":"1px","width":"1px"});this._addEvents();var div=JAK.cel("div",this.options.className,this.options.id);JAK.DOM.append([div,this.dom.next,this.dom.nextDisabled,this.dom.prev,this.dom.prevDisabled,this.dom.close]);JAK.DOM.append([div,this.dom.nextPreload,this.dom.nextDisabledPreload,this.dom.prevPreload,this.dom.prevDisabledPreload,this.dom.closePreload]);return div;};JAK.LightBox.Navigation.Basic.prototype._addEvents=function(){this.ec.push(JAK.Events.addListener(this.dom.next,"click",this,"_next"));this.ec.push(JAK.Events.addListener(this.dom.prev,"click",this,"_previous"));this.ec.push(JAK.Events.addListener(this.dom.close,"click",this,"_close"));this.ec.push(JAK.Events.addListener(document,"keydown",this,"_closeKey"));this.ec.push(JAK.Events.addListener(this.dom.nextDisabled,"click",this,"_disabled"));this.ec.push(JAK.Events.addListener(this.dom.prevDisabled,"click",this,"_disabled"));};JAK.LightBox.Navigation.Basic.prototype._disabled=function(e,elm){elm.blur();JAK.Events.cancelDef(e);};JAK.LightBox.Navigation.Basic.prototype._close=function(e,elm){elm.blur();JAK.Events.cancelDef(e);JAK.Events.stopEvent(e);this.owner.close();};JAK.LightBox.Navigation.Basic.prototype._next=function(e,elm){elm.blur();JAK.Events.cancelDef(e);this.owner.next();};JAK.LightBox.Navigation.Basic.prototype._previous=function(e,elm){elm.blur();JAK.Events.cancelDef(e);this.owner.previous();};JAK.LightBox.Navigation.Basic.prototype._closeKey=function(e,elm){if(e.keyCode==27){this.owner.close();}};JAK.LightBox.Navigation.Basic.prototype.update=function(index){if(!this.options.continuous){this.dom.prev.style.display="";this.dom.next.style.display="";this.dom.prevDisabled.style.display="none";this.dom.nextDisabled.style.display="none";if(index==0){this.dom.prev.style.display="none";if(this.options.showDisabled){this.dom.prevDisabled.style.display="";}}if(index==this.owner.data.length-1){this.dom.next.style.display="none";if(this.options.showDisabled){this.dom.nextDisabled.style.display="";}}}else{this.dom.prevDisabled.style.display="none";this.dom.nextDisabled.style.display="none";this.dom.prev.style.display="";this.dom.next.style.display="";}};JAK.Suggest=JAK.ClassMaker.makeClass({"NAME":"JAK.Suggest","VERSION":"4.1","IMPLEMENT":JAK.ISignals});JAK.Suggest.MODE_AUTOMATIC=0;JAK.Suggest.MODE_MANUAL=1;JAK.Suggest.prototype.$constructor=function(id,url,options){this.ec=[];this.dom={};this.url=url;this.options={"dict":"","count":10,"prefix":false,"highlight":false,"mode":JAK.Suggest.MODE_AUTOMATIC,"itemCtor":JAK.Suggest.Item,"parentElement":JAK.gel(id).form,"timeout":200};for(var p in options){this.options[p]=options[p];}this.items=[];this.remotes=[];this._rq=null;this._timeout=false;this._activeItem=false;this._request=this._request.bind(this);this._build(id);this._hoverLock=false;this._used=0;};JAK.Suggest.prototype.$destructor=function(){this._clear();this.ec.forEach(JAK.Events.removeListener,JAK.Events);};JAK.Suggest.prototype.setOptions=function(options){for(var p in options){this.options[p]=options[p];}};JAK.Suggest.prototype._request=function(){if(this.dom.input.value.length>0&&this.dom.input.value.trim().length>0){this._timeout=false;var url=this._buildUrl(this.dom.input.value);if(this._rq){this._rq.abort();}this._rq=new JAK.Request(JAK.Request.XML);this._rq.setCallback(this,"_response");this._rq.send(url);}};JAK.Suggest.prototype.action=function(){if(this._activeItem){this.dom.input.value=this._activeItem.getValue();}this._hide();this.makeEvent("suggestSubmit",{"form":this.options.parentElement});this._used=0;this.options.parentElement.submit();};JAK.Suggest.prototype.used=function(){return this._used;};JAK.Suggest.prototype.getActive=function(){return this._activeItem;};JAK.Suggest.prototype._build=function(id){var input=JAK.gel(id);var container=JAK.mel("div",{"className":"suggest"},{"width":input.offsetWidth+"px"});this.options.parentElement.appendChild(container);var content=JAK.mel("div",{"className":"content"});container.appendChild(content);this.dom.input=input;this.dom.container=container;this.dom.content=content;this._hide();this.options.parentElement.appendChild(container);this.ec.push(JAK.Events.addListener(input,"keyup",this,"_keyUp"));this.ec.push(JAK.Events.addListener(input,"keydown",this,"_keyNavigate"));this.ec.push(JAK.Events.addListener(container,"mousedown",JAK.Events.stopEvent));this.ec.push(JAK.Events.addListener(document,"mousedown",this,"_hide"));this.ec.push(JAK.Events.addListener(document,"mousemove",this,"_unlock"));};JAK.Suggest.prototype._show=function(){this._hoverLock=true;this.dom.container.style.display="block";};JAK.Suggest.prototype._hide=function(){this.dom.container.style.display="none";};JAK.Suggest.prototype._clear=function(){JAK.DOM.clear(this.dom.content);for(var i=0;i<this.items.length;i++){this.items[i].$destructor();}for(var i=0;i<this.remotes.length;i++){this.remotes[i].$destructor();}this.items=[];this.remotes=[];this._activeItem=false;};JAK.Suggest.prototype._response=function(xmlDoc){this._rq=null;this._clear();var result=xmlDoc.documentElement;var items=result.getElementsByTagName("item");for(var i=0;i<items.length;i++){var item=items[i];if(item.parentNode.parentNode.nodeName.toLowerCase()=="remote"){this._buildItem(JAK.Suggest.Remote,item,this.remotes);}else{this._buildItem(this.options.itemCtor,item,this.items);}}for(var i=0;i<this.items.length;i++){this.dom.content.appendChild(this.items[i].getContainer());}for(var i=0;i<this.remotes.length;i++){this.dom.content.appendChild(this.remotes[i].getContainer());}if(this.items.length+this.remotes.length){this._show();}else{this._hide();}};JAK.Suggest.prototype._buildUrl=function(query){var url=this.url;if(url.charAt(url.length-1)!="/"){url+="/";}url+=this.options.dict;var arr=[];arr.push("phrase="+encodeURIComponent(query));arr.push("result=xml");if(this.options.prefix){arr.push("prefix=1");}if(this.options.highlight){arr.push("highlight=1");}if(this.options.count){arr.push("count="+this.options.count);}url+="?"+arr.join("&");return url;};JAK.Suggest.prototype._buildItem=function(constructor,node,arr){var item=new constructor(this,node);arr.push(item);};JAK.Suggest.prototype._activate=function(item,activate){this._activeItem=item;for(var i=0;i<this.items.length;i++){var it=this.items[i];if(it==item){it.hoverOn();}else{it.hoverOff();}}if(activate&&this.options.mode==JAK.Suggest.MODE_AUTOMATIC){this.dom.input.value=this._activeItem.getValue();}};JAK.Suggest.prototype._keyNavigate=function(e,elm){var code=e.keyCode;if(code==13){if(this._used==1&&this._activeItem){this._used=2;}this.action();return;}if(code==39&&this._activeItem&&this.options.mode==JAK.Suggest.MODE_MANUAL){this._used=2;this.dom.input.value=this._activeItem.getValue();this._request();}if(this.items.length&&code==38){this._used=1;var index=this.items.indexOf(this._activeItem);index=(index==-1||index==0?0:index-1);this._activate(this.items[index],true);}if(this.items.length&&code==40){this._used=1;var index=this.items.indexOf(this._activeItem);var cnt=this.items.length;if(index==-1){index=0;}else{if(index+1==cnt){index=cnt-1;}else{index++;}}this._activate(this.items[index],true);}if(code==27||code==9){this._hide();}};JAK.Suggest.prototype._keyUp=function(e,elm){var code=e.keyCode;if(code==8||code==46){this._activate(false);this._startRequest();}else{if(((code<33)||(code>39))&&(code!=13)&&(code!=27)&&(code!=40)&&(code!=44)&&(code!=45)&&(code!=17)&&(code!=18)){this._startRequest();}}};JAK.Suggest.prototype._startRequest=function(){if(this._timeout){clearTimeout(this._timeout);}this._timeout=setTimeout(this._request,this.options.timeout);};JAK.Suggest.prototype._unlock=function(){this._hoverLock=false;};JAK.Suggest.Remote=JAK.ClassMaker.makeClass({"NAME":"JAK.Suggest.Remote","VERSION":"2.0"});JAK.Suggest.Remote.prototype.$constructor=function(owner,node){this.owner=owner;this.dom={};this.ec=[];this.node=node;this.value=node.getAttribute("value");this._build();};JAK.Suggest.Remote.prototype.$destructor=function(){this.ec.forEach(JAK.Events.removeListener,JAK.Events);};JAK.Suggest.Remote.prototype.getContainer=function(){return this.dom.container;};JAK.Suggest.Remote.prototype.getValue=function(){return this.value;};JAK.Suggest.Remote.prototype.getNode=function(){return this.node;};JAK.Suggest.Remote.prototype._build=function(){var p=JAK.mel("p",{"className":"remote"});p.innerHTML=this.value;var span=this._buildRelevance();p.insertBefore(span,p.firstChild);this.dom.container=p;};JAK.Suggest.Remote.prototype._buildRelevance=function(){var span=JAK.mel("span",{"className":"relevance"});span.innerHTML="rychlĂ˝ tip";return span;};JAK.Suggest.Item=JAK.ClassMaker.makeClass({"NAME":"JAK.Suggest.Item","VERSION":"2.0","EXTEND":JAK.Suggest.Remote});JAK.Suggest.Item.prototype._build=function(){var p=JAK.mel("p",{"className":"item"});p.innerHTML=this.value;var span=this._buildRelevance();p.insertBefore(span,p.firstChild);this.dom.container=p;this.ec.push(JAK.Events.addListener(this.dom.container,"click",this,"_action"));this.ec.push(JAK.Events.addListener(this.dom.container,"mouseover",this,"_over"));};JAK.Suggest.Item.prototype._buildRelevance=function(){var span=JAK.mel("span",{"className":"relevance"});span.innerHTML=this.node.getAttribute("relevance");return span;};JAK.Suggest.Item.prototype._action=function(e,elm){this.owner._used=2;this.owner.action();};JAK.Suggest.Item.prototype._over=function(){if(this.owner._hoverLock){return;}this.owner._activate(this,false);};JAK.Suggest.Item.prototype.hoverOn=function(){JAK.DOM.addClass(this.dom.container,"active");};JAK.Suggest.Item.prototype.hoverOff=function(){JAK.DOM.removeClass(this.dom.container,"active");};JAK.SuggestGoods=JAK.ClassMaker.makeClass({"NAME":"JAK.SuggestGoods","VERSION":"1.0","EXTEND":JAK.Suggest});JAK.SuggestGoods.prototype.$constructor=function(id,url,options,countrySelect,queryCont){this.$super(id,url,options);this.categoryId="";this.categoryName="";this.queryCont=JAK.gel(queryCont);JAK.Events.addListener(JAK.gel(countrySelect),"change",this,"_changeCategory");};JAK.SuggestGoods.prototype._changeCategory=function(e,elm){this.setCategoryId(elm.value,elm.options[elm.selectedIndex].text);};JAK.SuggestGoods.prototype._buildUrl=function(query){var url=this.url;if(this.options.dict!=""){url+="/"+this.options.dict;}var arr=[];var s=query.trim();arr.push("hotel="+encodeURIComponent(s));if(this.options.dict==""){arr.push("country_id="+this.getCategoryId());}url+="?"+arr.join("&");return url;};JAK.SuggestGoods.prototype.setCategoryId=function(categoryId,categoryName){this.categoryId=categoryId;this.categoryName=categoryName;};JAK.SuggestGoods.prototype._response=function(xmlDoc){this._clear();var result=xmlDoc.documentElement;var items=result.getElementsByTagName("item");for(var i=0;i<items.length;i++){var item=items[i];if(item.parentNode.parentNode.nodeName.toLowerCase()=="remote"){this._buildItem(JAK.Suggest.Remote,item,this.remotes);}else{this._buildItem(JAK.SuggestGoods.Item,item,this.items);}}for(var i=0;i<this.items.length;i++){this.dom.content.appendChild(this.items[i].getContainer());}for(var i=0;i<this.remotes.length;i++){this.dom.content.appendChild(this.remotes[i].getContainer());}if(this.items.length+this.remotes.length){this._show();}else{this._hide();}document.body.appendChild(this.dom.container);JAK.DOM.addClass(this.dom.container,"sghelp");var w=0;for(var i=0;i<items.length;i++){var ww=this.dom.content.childNodes[i].offsetWidth;w=(ww>w?ww:w);}JAK.DOM.removeClass(this.dom.container,"sghelp");this.queryCont.appendChild(this.dom.container);this.dom.container.style.overflow="visible";if(this.queryCont!="null"){var minWidth=this.queryCont.offsetWidth;}else{var minWidth=this.dom.input.offsetWidth;}if(w>600){this.dom.container.style.width="600px";this.dom.container.style.overflow="hidden";}else{if(w<minWidth){this.dom.container.style.width=minWidth+"px";this.dom.container.style.overflow="hidden";}else{this.dom.container.style.width=(w+"px");}}};JAK.Suggest.prototype.getCategoryName=function(){return this.categoryName;};JAK.Suggest.prototype.getCategoryId=function(){return this.categoryId;};JAK.SuggestGoods.Item=JAK.ClassMaker.makeClass({"NAME":"JAK.SuggestGoods","VERSION":"1.0","CLASS":"class","EXTEND":JAK.Suggest.Item});JAK.SuggestGoods.Item.prototype._build=function(){var p=JAK.cel("p","item");var input=this.owner.dom.input;var s=this.value.split("");var boldstart=this.node.getAttribute("boldstart");var boldend=this.node.getAttribute("boldend");if(boldstart!=null&&boldend!=null){var boldstartArray=boldstart.toString().split(",");var boldendArray=boldend.toString().split(",");for(var i=0;i<boldstartArray.length;i++){s.splice(parseInt(boldstartArray[i]),0,"<b>");s.splice(parseInt(boldendArray[i])+1,0,"</b>");}}p.innerHTML=s.join("");var span=this._buildRelevance();p.insertBefore(span,p.firstChild);var catName=this.owner.getCategoryName();var catId=this.owner.getCategoryId();if(catId!=0){if(catName!=""){var spanCat=JAK.cel("span","category");spanCat.innerHTML=catName;p.insertBefore(spanCat,p.firstChild);}}this.dom.container=p;this.ec.push(JAK.Events.addListener(this.dom.container,"click",this,"_action"));this.ec.push(JAK.Events.addListener(this.dom.container,"mouseover",this,"_over"));};JAK.Window=JAK.ClassMaker.makeClass({"NAME":"Window","VERSION":"2.0"});JAK.Window.prototype.$constructor=function(optObj){this.options={"imagePath":"/img/shadow-","imageFormat":"png","sizes":[6,6,6,6]};for(var p in optObj){this.options[p]=optObj[p];}this.content=JAK.mel("div",{"className":"window-content"},{"position":"relative"});;this.container=false;this._buildDom();};JAK.Window.prototype._buildDom=function(){var imageNames=[["lt","t","rt"],["l","","r"],["lb","b","rb"]];this.container=JAK.mel("div",{"className":"window-container"},{"position":"relative","zIndex":10});var table=JAK.mel("table",null,{"borderCollapse":"collapse","position":"relative"});var tbody=JAK.mel("tbody");JAK.DOM.append([table,tbody],[this.container,table]);for(var i=0;i<3;i++){var tr=JAK.cel("tr");tbody.appendChild(tr);for(var j=0;j<3;j++){var td=JAK.cel("td");td.style.padding="0px";td.style.margin="0px";var div=(i==1&&j==1?this.content:JAK.mel("div",null,{"overflow":"hidden"}));td.appendChild(div);var im=imageNames[i][j];if(im){var path=this.options.imagePath+im+"."+this.options.imageFormat;if(JAK.Browser.client=="ie"&&JAK.Browser.version<7&&this.options.imageFormat.match(/png/i)){td.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+path+"',sizingMethod='scale')";}else{td.style.backgroundImage="url("+path+")";}}if(i==0){div.style.height=this.options.sizes[0]+"px";}if(i==2){div.style.height=this.options.sizes[2]+"px";}if(j==0){div.style.width=this.options.sizes[3]+"px";}if(j==2){div.style.width=this.options.sizes[1]+"px";}if(j==1&&i!=1){td.style.width="auto";}tr.appendChild(td);}}};JAK.Window.prototype.$destructor=function(){for(var p in this){this[p]=null;}};JAK.Window.prototype.show=function(){this.container.style.display="";};JAK.Window.prototype.hide=function(){this.container.style.display="none";};}
